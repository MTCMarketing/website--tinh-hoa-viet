{"version":3,"file":"4484-2cc5866dd3ec1fc22042.js","mappings":"8JAsEO,MAAMA,GA9D4DC,EA8DL,CAClEC,QACE,0GAEFC,SAAU,CACRC,OAAQ,kBACRC,QAAS,mBACTC,MAAO,mBACPC,SAAU,oBAIZC,WAAY,CACVD,SAAUA,KAAM,IAAIE,MAAOC,gBAtEtB,CACL,YAAMC,CAAOC,GACX,MAAMC,EAAS,IAAIC,gBAGnB,IAAK,MAAOC,EAAKC,KAAUC,OAAOC,QAAQN,GAAO,CAC/C,MAAMO,EAAUlB,EAAOE,SAASY,GAC5BI,GAAoB,MAATH,GACbH,EAAOO,OAAOD,EAASH,EAAMK,WAEjC,CAGA,GAAIpB,EAAOO,WACT,IAAK,MAAOO,EAAKO,KAAcL,OAAOC,QAAQjB,EAAOO,YAAa,CAChE,MAAMW,EAAUlB,EAAOE,SAASY,GAC5BI,GAAWG,GACbT,EAAOO,OAAOD,EAASG,IAE3B,CAIFT,EAAOO,OAAO,MAAO,KACrBP,EAAOO,OAAO,cAAe,KAC7BP,EAAOO,OAAO,OAAO,GAAIX,KAAKc,OAE9B,MAAMC,QAAYC,MAAMxB,EAAOC,QAAS,CACtCwB,OAAQ,OACRC,QAAS,CAAE,eAAgB,qCAC3BC,KAAMf,EAAOQ,aAGf,IAAKG,EAAIK,GACP,MAAM,IAAIC,MAAM,oCAAoCN,EAAIO,OAAM,IAAIP,EAAIQ,YAGxE,OAAOR,CACT,IA3CG,IAAkEvB,EAmFlEgC,eAAeC,IACpBC,QAAQC,IAAI,qCAEZ,MAAMC,EAAQ,CACZjC,OAAQ,MACRC,QAAS,mBACTC,MAAO,uBAIT,IACE,MAAMkB,QAAYxB,EAAeW,OAAO0B,GACxCF,QAAQC,IAAI,4BAA6BZ,EAAIO,OAC/C,CAAE,MAAOO,GACPH,QAAQI,MAAM,uBAAwBD,EACxC,CACF,C","sources":["webpack:///./src/forms/email-usage.ts"],"sourcesContent":["// =====================================================================\n//  Google Form Submitter ‚Äì EMAIL USAGE FORM\n//  datetime auto-generated\n// =====================================================================\n\n/**\n * Generic submitter creator.\n */\nexport function createGoogleFormSubmitter<T extends Record<string, any>>(config: {\n  formUrl: string;\n  entryMap: Partial<Record<keyof T, string>>;\n  autoFields?: Partial<Record<keyof T, () => string>>;\n}) {\n  return {\n    async submit(data: Partial<T>): Promise<Response> {\n      const params = new URLSearchParams();\n\n      // Append normal user-provided fields\n      for (const [key, value] of Object.entries(data)) {\n        const entryId = config.entryMap[key as keyof T];\n        if (entryId && value != null) {\n          params.append(entryId, value.toString());\n        }\n      }\n\n      // Append auto-generated fields\n      if (config.autoFields) {\n        for (const [key, generator] of Object.entries(config.autoFields)) {\n          const entryId = config.entryMap[key as keyof T];\n          if (entryId && generator) {\n            params.append(entryId, generator());\n          }\n        }\n      }\n\n      // Required hidden Google Form extras\n      params.append(\"fvv\", \"1\");\n      params.append(\"pageHistory\", \"0\");\n      params.append(\"fbzx\", `${Date.now()}`);\n\n      const res = await fetch(config.formUrl, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n        body: params.toString(),\n      });\n\n      if (!res.ok) {\n        throw new Error(`‚ùå Google Form submission failed: ${res.status} ${res.statusText}`);\n      }\n\n      return res;\n    },\n  };\n}\n\n// =====================================================================\n//  FORM INTERFACE (EmailUsage)\n// =====================================================================\n\nexport interface EmailUsage {\n  source: string;    // entry.341708258\n  request: string;   // entry.2071003320\n  email: string;     // entry.1762895553\n  datetime: string;  // entry.1265904968 (auto-generated)\n}\n\n// =====================================================================\n//  FORM SUBMITTER\n// =====================================================================\n\nexport const emailUsageForm = createGoogleFormSubmitter<EmailUsage>({\n  formUrl:\n    \"https://docs.google.com/forms/d/e/1FAIpQLScpoCi9kdnUl3XRKMiKve-Eg9mZW42E-57gtK5BTTU9lUsjKQ/formResponse\",\n\n  entryMap: {\n    source: \"entry.341708258\",\n    request: \"entry.2071003320\",\n    email: \"entry.1762895553\",\n    datetime: \"entry.1265904968\",\n  },\n\n  // Auto-generate datetime\n  autoFields: {\n    datetime: () => new Date().toISOString(),\n  },\n});\n\n// =====================================================================\n//  TEST RUNNER\n// =====================================================================\n\nexport async function testEmailUsage() {\n  console.log(\"üß™ Starting EmailUsage form test‚Ä¶\");\n\n  const dummy = {\n    source: \"API\",\n    request: \"SendWelcomeEmail\",\n    email: \"someone@example.com\",\n    // datetime NOT included ‚Äî auto-generated\n  };\n\n  try {\n    const res = await emailUsageForm.submit(dummy);\n    console.log(\"‚úÖ Successfully submitted:\", res.status);\n  } catch (err) {\n    console.error(\"‚ùå Submission failed:\", err);\n  }\n}\n"],"names":["emailUsageForm","config","formUrl","entryMap","source","request","email","datetime","autoFields","Date","toISOString","submit","data","params","URLSearchParams","key","value","Object","entries","entryId","append","toString","generator","now","res","fetch","method","headers","body","ok","Error","status","statusText","async","testEmailUsage","console","log","dummy","err","error"],"sourceRoot":""}