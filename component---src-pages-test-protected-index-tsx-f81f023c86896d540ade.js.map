{"version":3,"file":"component---src-pages-test-protected-index-tsx-f81f023c86896d540ade.js","mappings":"yKAIe,SAASA,IACtB,MAAM,EAACC,EAAO,EAAEC,IAAcC,EAAAA,EAAAA,UAAc,OACtC,EAACC,EAAM,EAAEC,IAAaF,EAAAA,EAAAA,UAAS,8BAqCrC,OAnCAG,EAAAA,EAAAA,WAAU,KACaC,WACnB,MAAM,KAAEC,EAAI,MAAEC,SAAgBC,EAAAA,GAASC,KAAKC,aAE5C,GAAIH,EAGF,OAFAI,QAAQJ,MAAM,iBAAkBA,QAChCJ,EAAU,8BAIPG,EAAKP,SAIRC,EAAWM,EAAKP,SAChBI,EAAU,uBAJVA,EAAU,8CACVS,WAAW,KAAMC,EAAAA,EAAAA,UAAS,sBAAuB,QAOrDC,GAGA,MAAQR,KAAMS,GAAaP,EAAAA,GAASC,KAAKO,kBAAkB,CAACC,EAAQlB,KAClEC,EAAWD,GACNA,IACHI,EAAU,sCACVS,WAAW,KAAMC,EAAAA,EAAAA,UAAS,sBAAuB,SAIrD,MAAO,KACLE,EAASG,aAAaC,gBAEvB,IAEEpB,EAiBHqB,EAAAA,cAAAA,MAAAA,CACEC,MAAO,CACLC,WAAY,aACZC,UAAW,SACXC,UAAW,OACXC,MAAO,YAGTL,EAAAA,cAAAA,KAAAA,KAAI,kBACJA,EAAAA,cAAAA,IAAAA,KAAIlB,GACJkB,EAAAA,cAAAA,IAAAA,KAAG,YAAUrB,EAAQ2B,KAAKC,OAE1BP,EAAAA,cAAAA,SAAAA,CACEQ,QAASvB,gBACDG,EAAAA,GAASC,KAAKoB,WACpBhB,EAAAA,EAAAA,UAAS,uBAEXQ,MAAO,CACLG,UAAW,GACXM,QAAS,GACTC,aAAc,EACdC,WAAY,UACZP,MAAO,OACPQ,OAAQ,OACRC,OAAQ,YAEX,WAzCDd,EAAAA,cAAAA,MAAAA,CACEC,MAAO,CACLC,WAAY,aACZC,UAAW,SACXC,UAAW,OACXC,MAAO,UAGTL,EAAAA,cAAAA,KAAAA,KAAI,kBACJA,EAAAA,cAAAA,IAAAA,KAAIlB,GAqCZ,C","sources":["webpack:///./src/pages/test/protected/index.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { supabase } from \"../../../database/supabaseClient\"\nimport { navigate } from \"gatsby\"\n\nexport default function ProtectedPage() {\n  const [session, setSession] = useState<any>(null)\n  const [status, setStatus] = useState(\"Checking authentication...\")\n\n  useEffect(() => {\n    const checkSession = async () => {\n      const { data, error } = await supabase.auth.getSession()\n\n      if (error) {\n        console.error(\"Session error:\", error)\n        setStatus(\"⚠️ Error checking session.\")\n        return\n      }\n\n      if (!data.session) {\n        setStatus(\"❌ You must be logged in to view this page.\")\n        setTimeout(() => navigate(\"/members/dashboard\"), 1500)\n      } else {\n        setSession(data.session)\n        setStatus(\"✅ Access granted!\")\n      }\n    }\n\n    checkSession()\n\n    // Optional: listen for login/logout changes\n    const { data: listener } = supabase.auth.onAuthStateChange((_event, session) => {\n      setSession(session)\n      if (!session) {\n        setStatus(\"⚠️ Session expired. Redirecting...\")\n        setTimeout(() => navigate(\"/members/dashboard\"), 1500)\n      }\n    })\n\n    return () => {\n      listener.subscription.unsubscribe()\n    }\n  }, [])\n\n  if (!session) {\n    return (\n      <div\n        style={{\n          fontFamily: \"sans-serif\",\n          textAlign: \"center\",\n          marginTop: \"15vh\",\n          color: \"white\",\n        }}\n      >\n        <h2>Protected Page</h2>\n        <p>{status}</p>\n      </div>\n    )\n  }\n\n  return (\n    <div\n      style={{\n        fontFamily: \"sans-serif\",\n        textAlign: \"center\",\n        marginTop: \"15vh\",\n        color: \"#0a0a0a\",\n      }}\n    >\n      <h1>Protected Page</h1>\n      <p>{status}</p>\n      <p>Welcome, {session.user.email}</p>\n\n      <button\n        onClick={async () => {\n          await supabase.auth.signOut()\n          navigate(\"/members/dashboard\")\n        }}\n        style={{\n          marginTop: 20,\n          padding: 10,\n          borderRadius: 5,\n          background: \"#D32F2F\",\n          color: \"#fff\",\n          border: \"none\",\n          cursor: \"pointer\",\n        }}\n      >\n        Logout\n      </button>\n    </div>\n  )\n}\n"],"names":["ProtectedPage","session","setSession","useState","status","setStatus","useEffect","async","data","error","supabase","auth","getSession","console","setTimeout","navigate","checkSession","listener","onAuthStateChange","_event","subscription","unsubscribe","React","style","fontFamily","textAlign","marginTop","color","user","email","onClick","signOut","padding","borderRadius","background","border","cursor"],"sourceRoot":""}