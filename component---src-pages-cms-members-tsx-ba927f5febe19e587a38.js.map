{"version":3,"file":"component---src-pages-cms-members-tsx-ba927f5febe19e587a38.js","mappings":"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","sources":["webpack:///./src/componets/cms/DashboardTable.tsx","webpack:///./src/pages/cms/members.tsx","webpack:///./src/componets/shared/Avatar/Avatar.tsx","webpack:///./src/componets/shared/Avatar/avatar.svg"],"sourcesContent":["// src/members/mini-studio/DashboardTable.tsx\nimport React, { useEffect, useState } from \"react\";\nimport { navigate } from \"@reach/router\";\nimport Avatar from \"../shared/Avatar/Avatar\";\nimport { supabase } from \"../../database/supabaseClient\";\nimport { qstyle } from \"./dashboard-table\";\n\nconst DashboardTable: React.FC<{ query: string }> = ({ query }) => {\n  const [rows, setRows] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchMembers = async () => {\n      console.log(\"üì° [DashboardTable] Fetching from user_member_v2‚Ä¶\");\n      setLoading(true);\n      setError(null);\n\n      try {\n        const { data, error } = await supabase\n          .from(\"user_member_v2\")\n          .select(`\n            id,\n            created_at,\n            full_name,\n            hometown,\n            title,\n            avatar_url,\n            field_of_expertise\n          `)\n          .order(\"created_at\", { ascending: false });\n\n        if (error) throw error;\n        if (!data?.length) {\n          console.warn(\"‚ö†Ô∏è No members found in user_member_v2\");\n          setRows([]);\n          return;\n        }\n\n        // üß© 1Ô∏è‚É£ Exclude system/admin accounts\n        const excludedIds = [\n          \"6c77d859-1af1-418e-b0e0-0d3cc4e80fad\",\n          \"02c567a2-b193-4009-89e5-884386540733\",\n          \"e0a7bf63-0d67-4e86-95f2-2e2c3276e7f6\",\n          \"e04e38e0-7eed-4281-bc05-89fb6c9b30f1\",\n          \"387899c3-fa8a-4582-b6dc-0833dfc02f40\",\n        ];\n        const filteredData = data.filter((x) => !excludedIds.includes(x.id));\n\n        console.log(\n          `‚úÖ Loaded ${filteredData.length} visible members (filtered from ${data.length})`\n        );\n        setRows(filteredData);\n      } catch (err: any) {\n        console.error(\"üí• Fetch error:\", err);\n        setError(err.message || \"Unknown error\");\n        setRows([]);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchMembers();\n  }, []);\n\n  // üß© 2Ô∏è‚É£ Search / query filter\n  const searchFiltered = rows.filter((m) =>\n    [m.full_name, m.title, m.field_of_expertise, m.hometown]\n      .join(\" \")\n      .toLowerCase()\n      .includes(query.toLowerCase())\n  );\n\n  /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n     Render states\n  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\n  if (loading)\n    return <div style={{ padding: 40, textAlign: \"center\" }}>‚è≥ Loading members‚Ä¶</div>;\n\n  if (error)\n    return <div style={{ padding: 40, textAlign: \"center\", color: \"red\" }}>‚ùå {error}</div>;\n\n  if (!rows.length)\n    return (\n      <div style={{ padding: 40, textAlign: \"center\", color: \"#888\" }}>\n        ‚ö†Ô∏è No members found in <code>user_member_v2</code>.\n      </div>\n    );\n\n  if (!searchFiltered.length)\n    return (\n      <div style={{ padding: 40, textAlign: \"center\", color: \"#888\" }}>\n        üîç No results match <code>{query}</code>.\n      </div>\n    );\n\n  /* ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n     Main table\n  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ */\n  return (\n    <section style={{ position: \"relative\" }}>\n      <style>{qstyle}</style>\n\n      <div\n        className=\"table-header\"\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          padding: \"12px 16px\",\n          borderBottom: \"1px solid var(--border)\",\n        }}\n      >\n        <div>\n          <strong>Members</strong>\n          <div style={{ fontSize: \"11px\", color: \"var(--muted)\" }}>\n            Showing {searchFiltered.length} of {rows.length} total\n          </div>\n        </div>\n      </div>\n\n      <table>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Avatar</th>\n            <th>Full Name</th>\n            <th>Title</th>\n            <th>Expertise</th>\n            <th>Hometown</th>\n            <th>Joined</th>\n          </tr>\n        </thead>\n        <tbody>\n          {searchFiltered.map((m, i) => (\n            <tr key={m.id} onClick={() => navigate(`${m.id}`)}>\n              <td>{i + 1}</td>\n              <td>\n                <div className=\"avatar-wrapper\">\n                  <Avatar\n                    url={m.avatar_url || \"\"}\n                    width={32}\n                    height={32}\n                    alt={m.full_name || \"User Avatar\"}\n                  />\n                </div>\n              </td>\n              <td>{m.full_name || \"‚Äî\"}</td>\n              <td>{m.title || \"‚Äî\"}</td>\n              <td>{m.field_of_expertise || \"‚Äî\"}</td>\n              <td>{m.hometown || \"‚Äî\"}</td>\n              <td>\n                {m.created_at\n                  ? new Date(m.created_at).toLocaleDateString(undefined, {\n                      year: \"2-digit\",\n                      month: \"2-digit\",\n                      day: \"2-digit\",\n                    })\n                  : \"‚Äî\"}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </section>\n  );\n};\n\nexport default DashboardTable;\n","import React from \"react\";\nimport RoleRoutes from \"../../componets/shared/ProtectedRoute/RoleRoutes\";\nimport MiniStudioShell from \"../../componets/cms/MiniStudioShell\";\nimport DashboardTable from \"../../componets/cms/DashboardTable\";\n\nexport default function MembersPage() {\n  return (\n    <RoleRoutes role=\"admin\">\n      <MiniStudioShell>\n        {({ query }) => <DashboardTable query={query} />}\n      </MiniStudioShell>\n    </RoleRoutes>\n  );\n}\n","import React, { useState } from \"react\";\nimport defaultAvatar from \"./avatar.svg\"; // ‚úÖ imported fallback SVG (Gatsby-safe)\n\ninterface AvatarProps {\n  url?: string;\n  width?: number;\n  height?: number;\n  alt?: string;\n  className?: string;\n}\n\nconst Avatar: React.FC<AvatarProps> = ({\n  url,\n  width = 100,\n  height = 100,\n  alt = \"User Avatar\",\n  className = \"\",\n}) => {\n  const [imgLoaded, setImgLoaded] = useState(false);\n  const [imgError, setImgError] = useState(false);\n\n  const showFallback =\n    !url || imgError || url.trim() === \"\" || !imgLoaded;\n\n  return (\n    <img\n      src={showFallback ? defaultAvatar : url}\n      alt={alt}\n      width={width}\n      height={height}\n      className={`rounded-full object-cover ${className} ${\n        showFallback ? \"fallback-avatar\" : \"\"\n      }`}\n      onLoad={() => setImgLoaded(true)}\n      onError={() => setImgError(true)}\n      loading=\"lazy\"\n    />\n  );\n};\n\nexport default Avatar;\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjkwOSIgaGVpZ2h0PSIyOTA5IiB2aWV3Qm94PSIwIDAgMjkwOSAyOTA5IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjkwOC42IDE0NTQuMjVDMjkwOC42IDIyNTcuNCAyMjU3LjQ4IDI5MDguNSAxNDU0LjMgMjkwOC41QzY1MS4xMiAyOTA4LjUgMCAyMjU3LjQgMCAxNDU0LjI1QzAgNjUxLjA5NyA2NTEuMTIgMCAxNDU0LjMgMEMyMjU3LjQ4IDAgMjkwOC42IDY1MS4wOTcgMjkwOC42IDE0NTQuMjVaIiBmaWxsPSIjRDdFMUUxIi8+CjxwYXRoIGQ9Ik0yMzY3LjkzIDI1MDUuMjRWMjU4NS42OUMyMTE4LjIzIDI3ODcuNTYgMTgwMC4zOSAyOTA4LjQ3IDE0NTQuMjcgMjkwOC40N0MxMTA4LjIyIDI5MDguNDcgNzkwLjMzOSAyNzg3LjU2IDU0MC42NyAyNTg1Ljc2VjI1MDUuMjRDNTQwLjY3IDIwNzAuNTEgODkzLjEwNSAxNzE4LjAyIDEzMjcuODUgMTcxOC4wMkgxNTgwLjcxQzIwMTUuNSAxNzE4LjAyIDIzNjcuOTMgMjA3MC41MSAyMzY3LjkzIDI1MDUuMjRaIiBmaWxsPSIjQTFBRUIwIi8+CjxwYXRoIGQ9Ik0xOTM3LjM2IDEwMjIuMjZDMTkzNy4zNiAxMjg5LjA0IDE3MjEuMDkgMTUwNS4zIDE0NTQuMyAxNTA1LjNDMTE4Ny41MSAxNTA1LjMgOTcxLjI0MSAxMjg5LjA0IDk3MS4yNDEgMTAyMi4yNkM5NzEuMjQxIDc1NS40NzMgMTE4Ny41MSA1MzkuMjEzIDE0NTQuMyA1MzkuMjEzQzE3MjEuMDkgNTM5LjIxMyAxOTM3LjM2IDc1NS40NzMgMTkzNy4zNiAxMDIyLjI2WiIgZmlsbD0iI0ExQUVCMCIvPgo8L3N2Zz4K\""],"names":["_ref","query","rows","setRows","useState","loading","setLoading","error","setError","useEffect","async","console","log","data","supabase","from","select","order","ascending","length","warn","excludedIds","filteredData","filter","x","includes","id","err","message","fetchMembers","searchFiltered","m","full_name","title","field_of_expertise","hometown","join","toLowerCase","React","style","padding","textAlign","color","position","qstyle","className","display","justifyContent","alignItems","borderBottom","fontSize","map","i","key","onClick","navigate","Avatar","url","avatar_url","width","height","alt","created_at","Date","toLocaleDateString","undefined","year","month","day","MembersPage","RoleRoutes","role","MiniStudioShell","DashboardTable","imgLoaded","setImgLoaded","imgError","setImgError","showFallback","trim","src","onLoad","onError"],"sourceRoot":""}