{"version":3,"file":"af6409b51e1866d421f1d97952d4de93103f21e4-15635c422ad95827c036.js","mappings":"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","sources":["webpack:///./node_modules/lucide-react/dist/esm/icons/settings.js","webpack:///./src/componets/cms/SendMessage.tsx","webpack:///./node_modules/lucide-react/dist/esm/icons/trash-2.js","webpack:///./node_modules/lucide-react/dist/esm/icons/sun.js","webpack:///./node_modules/lucide-react/dist/esm/icons/log-out.js","webpack:///./node_modules/lucide-react/dist/esm/icons/send.js","webpack:///./node_modules/lucide-react/dist/esm/icons/paperclip.js","webpack:///./node_modules/lucide-react/dist/esm/icons/moon.js","webpack:///./node_modules/lucide-react/dist/esm/icons/x.js","webpack:///./node_modules/lucide-react/dist/esm/icons/menu.js","webpack:///./node_modules/lucide-react/dist/esm/shared/src/utils.js","webpack:///./node_modules/lucide-react/dist/esm/defaultAttributes.js","webpack:///./node_modules/lucide-react/dist/esm/Icon.js","webpack:///./node_modules/lucide-react/dist/esm/createLucideIcon.js"],"sourcesContent":["/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915\",\n      key: \"1i5ecw\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n];\nconst Settings = createLucideIcon(\"settings\", __iconNode);\n\nexport { __iconNode, Settings as default };\n//# sourceMappingURL=settings.js.map\n","import React, { useState, useRef, useEffect } from \"react\";\nimport {\n  Settings,\n  LogOut,\n  Sun,\n  Moon,\n  Menu,\n  X,\n  Paperclip,\n  Trash2,\n  Send,\n} from \"lucide-react\";\nimport { supabase } from \"../../database/supabaseClient\"; // ‚úÖ add this import\n\ninterface SendMessageProps {\n  messageId?: string;\n}\n\nconst SendMessage: React.FC<SendMessageProps> = ({ messageId }) => {\n  const [theme, setTheme] = useState<\"light\" | \"dark\">(\"light\");\n  const [open, setOpen] = useState(false);\n  const [navOpen, setNavOpen] = useState(false);\n  const [message, setMessage] = useState(\"\");\n  const [attachments, setAttachments] = useState<File[]>([]);\n  const [sending, setSending] = useState(false);\n  const [previousMessage, setPreviousMessage] = useState<string | null>(null);\n  const menuRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  /* ============================================================\n     üß† Load previous message from Supabase\n     ============================================================ */\n  useEffect(() => {\n    const fetchPrevMessage = async () => {\n      if (!messageId) return;\n\n      try {\n        console.log(\"üîç Fetching single DM by ID:\", messageId);\n        const { data, error } = await supabase\n          .from(\"dm_messages\")\n          .select(\"*\")\n          .eq(\"id\", messageId)\n          .single();\n\n        if (error) throw error;\n        console.log(\"‚úÖ Message found ‚Üí\", data);\n        setPreviousMessage(data.message || null);\n      } catch (err: any) {\n        console.error(\"‚ùå Fetch message failed:\", err.message);\n        setPreviousMessage(null);\n      }\n    };\n\n    fetchPrevMessage();\n  }, [messageId]);\n\n  /* ============================================================\n     üìé Attachments\n     ============================================================ */\n  const handleAttach = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files) {\n      const newFiles = Array.from(e.target.files);\n      setAttachments((prev) => [...prev, ...newFiles]);\n    }\n  };\n\n  const handleRemove = (index: number) => {\n    setAttachments((prev) => prev.filter((_, i) => i !== index));\n  };\n\n  /* ============================================================\n     üöÄ Send new message to Supabase\n     ============================================================ */\n  const handleSend = async () => {\n    if (!message.trim() && attachments.length === 0) {\n      alert(\"Please write a message or attach at least one file.\");\n      return;\n    }\n\n    setSending(true);\n    try {\n      // assume admin is logged in; send to same recipient as the previous message\n      const { data: session } = await supabase.auth.getSession();\n      const sender = session?.session?.user;\n      if (!sender) throw new Error(\"Not logged in\");\n\n      let recipientId = null;\n      if (messageId) {\n        // find recipient from the existing thread\n        const { data: prev } = await supabase\n          .from(\"dm_messages\")\n          .select(\"recipient_id,sender_id\")\n          .eq(\"id\", messageId)\n          .single();\n        if (prev) {\n          recipientId =\n            prev.sender_id === sender.id ? prev.recipient_id : prev.sender_id;\n        }\n      }\n\n      const { error } = await supabase.from(\"dm_messages\").insert({\n        message,\n        sender_id: sender.id,\n        recipient_id: recipientId,\n        is_read: false,\n      });\n\n      if (error) throw error;\n\n      alert(\"‚úÖ Message sent successfully!\");\n      setMessage(\"\");\n      setAttachments([]);\n    } catch (err: any) {\n      alert(\"‚ùå Send failed: \" + err.message);\n    } finally {\n      setSending(false);\n    }\n  };\n\n  /* ============================================================\n     üß≠ Menu Toggle\n     ============================================================ */\n  useEffect(() => {\n    const handleClick = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node))\n        setOpen(false);\n    };\n    document.addEventListener(\"click\", handleClick);\n    return () => document.removeEventListener(\"click\", handleClick);\n  }, []);\n\n  /* ============================================================\n     üñºÔ∏è UI\n     ============================================================ */\n  return (\n    <div className={`app ${theme}`}>\n      <style>{`\n        body, html { margin: 0; font-family: 'Inter', sans-serif; }\n        .app { min-height: 100vh; background: var(--bg); color: var(--text); transition: background .3s, color .3s; overflow-x: hidden;}\n        .app.light { --bg: #f8fafc; --panel: #ffffff; --border: rgba(0,0,0,0.08);\n          --text: #111827; --muted: #6b7280; --accent: #10b981; --accent-bg: rgba(16,185,129,0.1);}\n        .app.dark { --bg: #0f1318; --panel: #0b0f14; --border: rgba(255,255,255,0.08);\n          --text: #d1d5db; --muted: #9ca3af; --accent: #10b981; --accent-bg: rgba(16,185,129,0.15);}\n        header { background: var(--panel); border-bottom: 1px solid var(--border);\n          padding: 12px 20px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 30;}\n        .brand { display: flex; align-items: center; gap: 8px; font-weight: 600; color: var(--text); font-size: 14px;}\n        .brand-icon { width: 24px; height: 24px; background: linear-gradient(135deg, #10b981, #059669); border-radius: 3px;}\n        .actions { display: flex; align-items: center; gap: 10px;}\n        button { border: none; border-radius: 5px; font-size: 13px; padding: 7px 12px; cursor: pointer;\n          background: var(--panel); color: var(--text); display: flex; align-items: center; gap: 6px; transition: all .2s;}\n        button:hover { background: var(--accent-bg); }\n        .primary-btn { background: var(--accent); color: #072c21; font-weight: 500;}\n        main { max-width: 900px; margin: 30px auto; padding: 0 20px; display: flex; flex-direction: column; gap: 20px;}\n        .message-card { background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 20px;}\n        textarea { width: 100%; border: 1px solid var(--border); background: var(--panel); color: var(--text);\n          font-size: 14px; border-radius: 8px; padding: 10px; min-height: 120px; resize: vertical; outline: none;}\n        textarea:focus { border-color: var(--accent); box-shadow: 0 0 0 2px var(--accent-bg);}\n        .attachments { margin-top: 15px; display: flex; flex-wrap: wrap; gap: 10px;}\n        .file-item { background: var(--accent-bg); border: 1px solid var(--border); border-radius: 8px; padding: 6px 10px;\n          display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--text);}\n        .file-item img { width: 30px; height: 30px; border-radius: 5px; object-fit: cover;}\n        .file-remove { background: none; color: var(--muted); padding: 0; border: none; cursor: pointer;}\n        .file-remove:hover { color: red;}\n        .message-actions { display: flex; justify-content: space-between; align-items: center;\n          margin-top: 20px; border-top: 1px solid var(--border); padding-top: 15px;}\n        footer { text-align: center; color: var(--muted); font-size: 12px; margin: 40px 0 20px;}\n        .dropdown { position: relative;}\n        .menu { position: absolute; top: 110%; right: 0; background: var(--panel); border: 1px solid var(--border);\n          border-radius: 8px; box-shadow: 0 4px 10px rgba(0,0,0,0.2); width: 160px; overflow: hidden; z-index: 50; display: none;}\n        .menu.open { display: block; }\n        .menu button { width: 100%; justify-content: flex-start; background: none; border-radius: 0; }\n        .menu button:hover { background: var(--accent-bg); }\n        .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n      `}</style>\n\n      <header>\n        <div className=\"brand\">\n          <button onClick={() => setNavOpen(!navOpen)} style={{ background: \"none\", border: \"none\", cursor: \"pointer\" }}>\n            {navOpen ? <X size={18} /> : <Menu size={18} />}\n          </button>\n          <div className=\"brand-icon\" />\n          New Message\n        </div>\n        <div className=\"actions\">\n          <div className=\"dropdown\" ref={menuRef}>\n            <button onClick={() => setOpen(!open)}>\n              <Settings size={14} /> Settings\n            </button>\n            <div className={`menu ${open ? \"open\" : \"\"}`}>\n              <button onClick={() => alert(\"Profile clicked\")}>Profile</button>\n              <button onClick={() => alert(\"Preferences clicked\")}>Preferences</button>\n              <hr />\n              <button onClick={() => setTheme(theme === \"light\" ? \"dark\" : \"light\")}>\n                {theme === \"light\" ? <Moon size={14} /> : <Sun size={14} />} Theme: {theme === \"light\" ? \"Dark\" : \"Light\"}\n              </button>\n            </div>\n          </div>\n          <button className=\"primary-btn\">\n            <LogOut size={14} /> Sign out\n          </button>\n        </div>\n      </header>\n\n      <main>\n        {previousMessage && (\n          <div className=\"message-card\">\n            <h3 style={{ margin: \"0 0 10px\", fontSize: \"16px\", fontWeight: 600 }}>Previous Message</h3>\n            <p style={{ fontSize: \"14px\", color: \"var(--muted)\", margin: 0 }}>{previousMessage}</p>\n          </div>\n        )}\n\n        <div className=\"message-card\">\n          <h3 style={{ margin: \"0 0 10px\", fontSize: \"16px\", fontWeight: 600 }}>Compose Message</h3>\n          <textarea value={message} onChange={(e) => setMessage(e.target.value)} placeholder=\"Write your message...\" />\n\n          <div className=\"attachments\">\n            {attachments.map((file, index) => {\n              const isImage = file.type.startsWith(\"image/\");\n              const previewUrl = isImage ? URL.createObjectURL(file) : null;\n              return (\n                <div key={index} className=\"file-item\">\n                  {isImage && <img src={previewUrl!} alt={file.name} />}\n                  <span>{file.name}</span>\n                  <button className=\"file-remove\" onClick={() => handleRemove(index)}>\n                    <Trash2 size={14} />\n                  </button>\n                </div>\n              );\n            })}\n          </div>\n\n          <div className=\"message-actions\">\n            <button onClick={() => fileInputRef.current?.click()}>\n              <Paperclip size={14} /> Attach Files\n            </button>\n            <input type=\"file\" ref={fileInputRef} multiple onChange={handleAttach} style={{ display: \"none\" }} />\n\n            <button\n              className=\"primary-btn\"\n              onClick={handleSend}\n              disabled={sending}\n              style={{\n                opacity: sending ? 0.8 : 1,\n                cursor: sending ? \"not-allowed\" : \"pointer\",\n                display: \"inline-flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                gap: \"6px\",\n                minWidth: \"130px\",\n              }}\n            >\n              {sending ? (\n                <>\n                  <span\n                    style={{\n                      width: \"14px\",\n                      height: \"14px\",\n                      border: \"2px solid rgba(255,255,255,0.4)\",\n                      borderTopColor: \"white\",\n                      borderRadius: \"50%\",\n                      display: \"inline-block\",\n                      animation: \"spin 0.8s linear infinite\",\n                    }}\n                  ></span>\n                  Sending...\n                </>\n              ) : (\n                <>\n                  <Send size={16} />\n                  Send Message\n                </>\n              )}\n            </button>\n          </div>\n        </div>\n      </main>\n\n      <footer>Tinh Hoa Viet</footer>\n    </div>\n  );\n};\n\nexport default SendMessage;\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 11v6\", key: \"nco0om\" }],\n  [\"path\", { d: \"M14 11v6\", key: \"outv1u\" }],\n  [\"path\", { d: \"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6\", key: \"miytrc\" }],\n  [\"path\", { d: \"M3 6h18\", key: \"d0wm0j\" }],\n  [\"path\", { d: \"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\", key: \"e791ji\" }]\n];\nconst Trash2 = createLucideIcon(\"trash-2\", __iconNode);\n\nexport { __iconNode, Trash2 as default };\n//# sourceMappingURL=trash-2.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"4\", key: \"4exip2\" }],\n  [\"path\", { d: \"M12 2v2\", key: \"tus03m\" }],\n  [\"path\", { d: \"M12 20v2\", key: \"1lh1kg\" }],\n  [\"path\", { d: \"m4.93 4.93 1.41 1.41\", key: \"149t6j\" }],\n  [\"path\", { d: \"m17.66 17.66 1.41 1.41\", key: \"ptbguv\" }],\n  [\"path\", { d: \"M2 12h2\", key: \"1t8f8n\" }],\n  [\"path\", { d: \"M20 12h2\", key: \"1q8mjw\" }],\n  [\"path\", { d: \"m6.34 17.66-1.41 1.41\", key: \"1m8zz5\" }],\n  [\"path\", { d: \"m19.07 4.93-1.41 1.41\", key: \"1shlcs\" }]\n];\nconst Sun = createLucideIcon(\"sun\", __iconNode);\n\nexport { __iconNode, Sun as default };\n//# sourceMappingURL=sun.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 17 5-5-5-5\", key: \"1bji2h\" }],\n  [\"path\", { d: \"M21 12H9\", key: \"dn1m92\" }],\n  [\"path\", { d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\", key: \"1uf3rs\" }]\n];\nconst LogOut = createLucideIcon(\"log-out\", __iconNode);\n\nexport { __iconNode, LogOut as default };\n//# sourceMappingURL=log-out.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z\",\n      key: \"1ffxy3\"\n    }\n  ],\n  [\"path\", { d: \"m21.854 2.147-10.94 10.939\", key: \"12cjpa\" }]\n];\nconst Send = createLucideIcon(\"send\", __iconNode);\n\nexport { __iconNode, Send as default };\n//# sourceMappingURL=send.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551\",\n      key: \"1miecu\"\n    }\n  ]\n];\nconst Paperclip = createLucideIcon(\"paperclip\", __iconNode);\n\nexport { __iconNode, Paperclip as default };\n//# sourceMappingURL=paperclip.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401\",\n      key: \"kfwtm\"\n    }\n  ]\n];\nconst Moon = createLucideIcon(\"moon\", __iconNode);\n\nexport { __iconNode, Moon as default };\n//# sourceMappingURL=moon.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M18 6 6 18\", key: \"1bl5f8\" }],\n  [\"path\", { d: \"m6 6 12 12\", key: \"d8bk6v\" }]\n];\nconst X = createLucideIcon(\"x\", __iconNode);\n\nexport { __iconNode, X as default };\n//# sourceMappingURL=x.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M4 5h16\", key: \"1tepv9\" }],\n  [\"path\", { d: \"M4 12h16\", key: \"1lakjw\" }],\n  [\"path\", { d: \"M4 19h16\", key: \"1djgab\" }]\n];\nconst Menu = createLucideIcon(\"menu\", __iconNode);\n\nexport { __iconNode, Menu as default };\n//# sourceMappingURL=menu.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nconst toKebabCase = (string) => string.replace(/([a-z0-9])([A-Z])/g, \"$1-$2\").toLowerCase();\nconst toCamelCase = (string) => string.replace(\n  /^([A-Z])|[\\s-_]+(\\w)/g,\n  (match, p1, p2) => p2 ? p2.toUpperCase() : p1.toLowerCase()\n);\nconst toPascalCase = (string) => {\n  const camelCase = toCamelCase(string);\n  return camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n};\nconst mergeClasses = (...classes) => classes.filter((className, index, array) => {\n  return Boolean(className) && className.trim() !== \"\" && array.indexOf(className) === index;\n}).join(\" \").trim();\nconst hasA11yProp = (props) => {\n  for (const prop in props) {\n    if (prop.startsWith(\"aria-\") || prop === \"role\" || prop === \"title\") {\n      return true;\n    }\n  }\n};\n\nexport { hasA11yProp, mergeClasses, toCamelCase, toKebabCase, toPascalCase };\n//# sourceMappingURL=utils.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nvar defaultAttributes = {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  width: 24,\n  height: 24,\n  viewBox: \"0 0 24 24\",\n  fill: \"none\",\n  stroke: \"currentColor\",\n  strokeWidth: 2,\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n};\n\nexport { defaultAttributes as default };\n//# sourceMappingURL=defaultAttributes.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport defaultAttributes from './defaultAttributes.js';\nimport { mergeClasses, hasA11yProp } from './shared/src/utils.js';\n\nconst Icon = forwardRef(\n  ({\n    color = \"currentColor\",\n    size = 24,\n    strokeWidth = 2,\n    absoluteStrokeWidth,\n    className = \"\",\n    children,\n    iconNode,\n    ...rest\n  }, ref) => createElement(\n    \"svg\",\n    {\n      ref,\n      ...defaultAttributes,\n      width: size,\n      height: size,\n      stroke: color,\n      strokeWidth: absoluteStrokeWidth ? Number(strokeWidth) * 24 / Number(size) : strokeWidth,\n      className: mergeClasses(\"lucide\", className),\n      ...!children && !hasA11yProp(rest) && { \"aria-hidden\": \"true\" },\n      ...rest\n    },\n    [\n      ...iconNode.map(([tag, attrs]) => createElement(tag, attrs)),\n      ...Array.isArray(children) ? children : [children]\n    ]\n  )\n);\n\nexport { Icon as default };\n//# sourceMappingURL=Icon.js.map\n","/**\n * @license lucide-react v0.548.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport { forwardRef, createElement } from 'react';\nimport { mergeClasses, toKebabCase, toPascalCase } from './shared/src/utils.js';\nimport Icon from './Icon.js';\n\nconst createLucideIcon = (iconName, iconNode) => {\n  const Component = forwardRef(\n    ({ className, ...props }, ref) => createElement(Icon, {\n      ref,\n      iconNode,\n      className: mergeClasses(\n        `lucide-${toKebabCase(toPascalCase(iconName))}`,\n        `lucide-${iconName}`,\n        className\n      ),\n      ...props\n    })\n  );\n  Component.displayName = toPascalCase(iconName);\n  return Component;\n};\n\nexport { createLucideIcon as default };\n//# sourceMappingURL=createLucideIcon.js.map\n"],"names":["Settings","d","key","cx","cy","r","_ref","messageId","theme","setTheme","useState","open","setOpen","navOpen","setNavOpen","message","setMessage","attachments","setAttachments","sending","setSending","previousMessage","setPreviousMessage","menuRef","useRef","fileInputRef","useEffect","async","console","log","data","error","supabase","from","select","eq","single","err","fetchPrevMessage","handleClick","e","current","contains","target","document","addEventListener","removeEventListener","React","className","onClick","style","background","border","cursor","X","size","Menu","ref","alert","Moon","Sun","LogOut","margin","fontSize","fontWeight","color","value","onChange","placeholder","map","file","index","isImage","type","startsWith","previewUrl","URL","createObjectURL","src","alt","name","prev","filter","_","i","handleRemove","Trash2","_fileInputRef$current","click","Paperclip","multiple","files","newFiles","Array","display","trim","length","session","auth","getSession","sender","_session$session","user","Error","recipientId","sender_id","id","recipient_id","insert","is_read","disabled","opacity","alignItems","justifyContent","gap","minWidth","width","height","borderTopColor","borderRadius","animation","Send","toPascalCase","string","camelCase","replace","match","p1","p2","toUpperCase","toLowerCase","toCamelCase","charAt","slice","mergeClasses","classes","array","Boolean","indexOf","join","hasA11yProp","props","prop","defaultAttributes","xmlns","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","Icon","forwardRef","absoluteStrokeWidth","children","iconNode","rest","createElement","Number","tag","attrs","isArray","createLucideIcon","iconName","Component","displayName"],"sourceRoot":""}