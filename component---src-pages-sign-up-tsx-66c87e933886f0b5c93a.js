"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7374],{599:function(e,a,t){t.d(a,{T4:function(){return c},mg:function(){return o},tp:function(){return i},vM:function(){return r},vx:function(){return l}});var n=t(6634),s=t(6898);const l=async function(e){let{onSuccess:a,onFail:t}=void 0===e?{}:e;console.log("ğŸ” Logging outâ€¦"),(0,n.nR)();const{error:l}=await s.ND.auth.signOut();if(l)return console.error("âŒ Logout error:",l),null==t?void 0:t(l.message);(0,n.nR)(),localStorage.removeItem("__thv_valid_supabase_keys__"),null==a||a()},r=async e=>{let{email:a,password:t,fullName:n,onSuccess:l,onFail:r}=e;const{data:o,error:c}=await s.ND.auth.signUp({email:a,password:t,options:{data:{full_name:n||"unknown",signup_source:"thv-web"}}});c?null==r||r(c.message):null==l||l()},o=async e=>{let{email:a,password:t,onSuccess:n,onFail:l}=e;const{data:r,error:o}=await s.ND.auth.signInWithPassword({email:a,password:t});o?null==l||l(o.message):null==n||n()},c=async e=>{let{email:a,onSuccess:t,onFail:n}=e;const{data:l,error:r}=await s.ND.auth.resetPasswordForEmail(a);r?null==n||n(r.message):null==t||t()},i=async e=>{let{newPassword:a,onSuccess:t,onFail:n}=e;const{data:l,error:r}=await s.ND.auth.updateUser({password:a});r?null==n||n(r.message):null==t||t()}},6634:function(e,a,t){function n(){return Object.keys(localStorage).filter(e=>e.startsWith("sb-")&&e.includes("-auth-token"))}function s(){const e=n();if(0===e.length)return;const a={};e.forEach(e=>a[e]=localStorage.getItem(e)||""),localStorage.setItem("__thv_valid_supabase_keys__",JSON.stringify(a))}function l(){const e=localStorage.getItem("__thv_valid_supabase_keys__");if(!e)return;const a=JSON.parse(e);Object.keys(a).forEach(e=>{localStorage.getItem(e)||(console.log("ğŸ›  Restoring missing Supabase key:",e),localStorage.setItem(e,a[e]))})}function r(){const e=JSON.parse(localStorage.getItem("__thv_valid_supabase_keys__")||"{}");n().forEach(a=>{e[a]||(console.log("ğŸ§¨ Removing stale Supabase key:",a),localStorage.removeItem(a))})}t.d(a,{ID:function(){return l},Uf:function(){return s},nR:function(){return r}})},7343:function(e,a,t){t.r(a),t.d(a,{default:function(){return m}});var n=t(6540),s=t(5268),l=t(3),r=t(599);const o="tinh-hoa-viet";console.log("ğŸ” EMAIL_SOURCE (top-level) =",o);const c={EN:{brandTitle:"TINH HOA VIá»†T",tagline:"Where Vietnamese Excellence Meets Global Recognition",features:["Premium Vietnamese Heritage","Global Excellence Standards","Elite Community Access"],begin:"Create Your Account",sub:"Join the platform that recognizes Vietnamese excellence",fullName:"Full Name",email:"Email Address",password:"Password",confirmPassword:"Confirm Password",passwordHint:"At least 8 characters with numbers and symbols",terms1:"I agree to the ",tos:"Terms of Service",and:" and ",privacy:"Privacy Policy",submit:"Create Account",have:"Already part of our community? ",login:"Sign In to Your Account",langEN:"EN",langVN:"VN"},VN:{brandTitle:"TINH HOA VIá»†T",tagline:"NÆ¡i tÃ´n vinh tinh hoa Viá»‡t Nam vÆ°Æ¡n táº§m quá»‘c táº¿",features:["Di sáº£n Viá»‡t Nam Ä‘áº³ng cáº¥p","Chuáº©n má»±c xuáº¥t sáº¯c toÃ n cáº§u","Cá»™ng Ä‘á»“ng tinh hoa"],begin:"Táº¡o TÃ i Khoáº£n",sub:"Tham gia ná»n táº£ng tÃ´n vinh tinh hoa Viá»‡t",fullName:"Há» vÃ  TÃªn",email:"Äá»‹a chá»‰ Email",password:"Máº­t kháº©u",confirmPassword:"XÃ¡c nháº­n máº­t kháº©u",passwordHint:"Tá»‘i thiá»ƒu 8 kÃ½ tá»±, cÃ³ sá»‘ vÃ  kÃ½ hiá»‡u",terms1:"TÃ´i Ä‘á»“ng Ã½ vá»›i ",tos:"Äiá»u khoáº£n Dá»‹ch vá»¥",and:" vÃ  ",privacy:"ChÃ­nh sÃ¡ch Báº£o máº­t",submit:"Táº¡o TÃ i Khoáº£n Tinh Hoa",have:"ÄÃ£ cÃ³ tÃ i khoáº£n? ",login:"ÄÄƒng nháº­p tÃ i khoáº£n",langEN:"EN",langVN:"VN"}};var i=()=>{(0,n.useEffect)(()=>{console.log("ğŸ”¥ SignUpV2 component mounted"),console.log("ğŸ” EMAIL_SOURCE =",o)},[]);const{0:e,1:a}=(0,n.useState)({fullName:"",email:"",password:"",confirmPassword:"",agree:!1}),{0:i,1:m}=(0,n.useState)("EN"),{0:u,1:d}=(0,n.useState)(""),{0:g,1:h}=(0,n.useState)(!1),p=c[i],f=e=>{const{name:t,value:n,type:s,checked:l}=e.target;a(e=>Object.assign({},e,{[t]:"checkbox"===s?l:n}))};return n.createElement("div",{className:"auth-shell"},n.createElement("aside",{className:"brand-side","aria-hidden":!0},n.createElement("div",{className:"brand-sheen"}),n.createElement("div",{className:"brand-pattern"}),n.createElement("div",{className:"brand-wrap"},n.createElement("h1",{className:"brand-name"},p.brandTitle),n.createElement("p",{className:"brand-tag"},p.tagline),n.createElement("ul",{className:"brand-features"},p.features.map((e,a)=>n.createElement("li",{className:"feature",key:a},n.createElement("span",{className:"tick"},"âœ“"),n.createElement("span",null,e)))))),n.createElement("main",{className:"form-side"},n.createElement("header",{className:"form-top"},n.createElement("div",{className:"lang-switch"},n.createElement("button",{className:"lang "+("EN"===i?"active":""),onClick:()=>m("EN")},p.langEN),n.createElement("span",{className:"mid"},"|"),n.createElement("button",{className:"lang "+("VN"===i?"active":""),onClick:()=>m("VN")},p.langVN))),n.createElement("section",{className:"form-wrap"},n.createElement("div",{className:"intro"},n.createElement("h2",{className:"title"},p.begin),n.createElement("p",{className:"subtitle"},p.sub)),n.createElement("form",{onSubmit:async a=>{if(a.preventDefault(),!g){if(d(""),h(!0),!e.agree)return d("EN"===i?"âŒ You must agree to the Terms of Service":"âŒ Báº¡n pháº£i Ä‘á»“ng Ã½ vá»›i Äiá»u khoáº£n Dá»‹ch vá»¥"),void h(!1);if(e.password!==e.confirmPassword)return d("EN"===i?"âŒ Passwords do not match":"âŒ Máº­t kháº©u khÃ´ng khá»›p"),void h(!1);if(e.password.length<8)return d("EN"===i?"âŒ Password must be at least 8 characters":"âŒ Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 8 kÃ½ tá»±"),void h(!1);console.log("ğŸš€ Calling handleSignup..."),(0,r.vM)({email:e.email,password:e.password,fullName:e.fullName,onSuccess:()=>{h(!1),(async()=>{console.log("ğŸ“¨ Signup success for:",e.email),h(!0),d("âœ… Check your email for a verification link!");try{const{emailUsageForm:a}=await t.e(4484).then(t.bind(t,4484));await a.submit({source:o,request:"signup-email",email:e.email})}catch(a){console.error("ğŸ”¥ Email usage logging FAILED:",a)}(0,s.navigate)("/check-email")})()},onFail:e=>{h(!1),(e=>{console.warn("âŒ Signup failed:",e),d("âŒ "+(e||"Signup failed. Please try again."))})(e)}})}},className:"auth-form",noValidate:!0},n.createElement("div",{className:"field"},n.createElement("label",{htmlFor:"fullName"},p.fullName," ",n.createElement("span",{className:"req"},"*")),n.createElement("input",{type:"text",id:"fullName",name:"fullName",value:e.fullName,onChange:f,required:!0})),n.createElement("div",{className:"field"},n.createElement("label",{htmlFor:"email"},p.email," ",n.createElement("span",{className:"req"},"*")),n.createElement("input",{type:"email",id:"email",name:"email",value:e.email,onChange:f,required:!0})),n.createElement("div",{className:"form-row"},n.createElement("div",{className:"field"},n.createElement("label",{htmlFor:"password"},p.password," ",n.createElement("span",{className:"req"},"*")),n.createElement("input",{type:"password",id:"password",name:"password",value:e.password,onChange:f,required:!0,minLength:8}),n.createElement("small",{className:"hint"},p.passwordHint)),n.createElement("div",{className:"field"},n.createElement("label",{htmlFor:"confirmPassword"},p.confirmPassword," ",n.createElement("span",{className:"req"},"*")),n.createElement("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:f,required:!0,minLength:8}))),n.createElement("div",{className:"terms"},n.createElement("input",{type:"checkbox",id:"agree",name:"agree",checked:e.agree,onChange:f,required:!0}),n.createElement("label",{htmlFor:"agree"},p.terms1,n.createElement("a",{href:"/terms-of-service"},p.tos),p.and,n.createElement("a",{href:"/privacy-policy"},p.privacy))),n.createElement("button",{type:"submit",className:"cta",disabled:g},n.createElement("span",null,g?"EN"===i?"Processingâ€¦":"Äang xá»­ lÃ½â€¦":p.submit),g?n.createElement("span",{className:"btn-spinner"}):n.createElement(l.dyV,{className:"arrow"})),u&&n.createElement("p",{style:{textAlign:"center",marginTop:10,color:"#fff"}},u),n.createElement("p",{className:"switch"},p.have,n.createElement("a",{href:"/sign-in"},p.login))))))};var m=()=>n.createElement("main",null,n.createElement(i,null))}}]);
//# sourceMappingURL=component---src-pages-sign-up-tsx-66c87e933886f0b5c93a.js.map