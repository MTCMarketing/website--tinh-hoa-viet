/*! For license information please see component---src-pages-cms-index-tsx-487b5e2e54041a4d9479.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4653],{1302:function(e,n,t){t.d(n,{A:function(){return d}});var r=t(6540),a=t(7490),o=t(5268);function i(e){let{navOpen:n,setNavOpen:t}=e;const a=e=>{(0,o.navigate)(e),t(!1)};return r.createElement(r.Fragment,null,r.createElement("style",null,"\n        .sidenav-overlay {\n          position: fixed; top: 0; left: 0; height: 100%;\n          width: "+(n?"220px":"0")+";\n          background: var(--panel); border-right: 1px solid var(--border);\n          overflow: hidden; transition: width .25s ease-in-out; z-index: 40;\n          display: flex; flex-direction: column;\n          padding: "+(n?"20px":"0")+";\n          gap: 6px;\n        }\n        .sidenav-overlay button {\n          background: none; border: none; color: var(--text);\n          text-align: left; padding: 10px; font-size: 14px; border-radius: 6px;\n          cursor: pointer;\n          width: 100%;\n        }\n        .sidenav-overlay button:hover { background: var(--accent-bg); }\n        .nav-backdrop {\n          position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 35;\n          opacity: "+(n?"1":"0")+";\n          pointer-events: "+(n?"auto":"none")+";\n          transition: opacity .2s;\n        }\n      "),r.createElement("div",{className:"sidenav-overlay"},r.createElement("button",{onClick:()=>a("/cms")},"ðŸ  Dashboard"),r.createElement("button",{onClick:()=>a("/cms/candidates")},"ðŸ‘¥ Candidates"),r.createElement("button",{onClick:()=>a("/cms/members")},"ðŸ§‘â€ðŸ¤â€ðŸ§‘ Members"),r.createElement("button",{onClick:()=>a("/cms/editor")},"ðŸ“ Editor"),r.createElement("button",{onClick:()=>a("/cms/editor?page=landing&section=blogContent")},"ðŸ“° Blog "),r.createElement("button",{onClick:()=>a("/cms/pricing")},"ðŸ’° Pricing & Usage")),r.createElement("div",{className:"nav-backdrop",onClick:()=>t(!1)}))}var l=t(3641);function d(e){let{title:n="Tinh Hoa Viá»‡t CMS",onThemeChange:t,children:o}=e;const{0:d,1:s}=(0,r.useState)("light"),{0:c,1:p}=(0,r.useState)(!1),{0:u,1:m}=(0,r.useState)("");return r.createElement("div",{className:"app "+d},r.createElement("style",null,(0,a.X)(c)),r.createElement(i,{navOpen:c,setNavOpen:p}),r.createElement(l.A,{title:n,theme:d,setTheme:s,navOpen:c,setNavOpen:p,onThemeChange:t}),r.createElement("main",null,"function"==typeof o?o({query:u}):o),r.createElement("footer",null,"Tinh Hoa Viet"))}},2479:function(e,n,t){var r=t(6540),a=t(6898),o=t(5268);n.A=e=>{let{children:n,role:t="member",redirect:i="/members/dashboard"}=e;const{0:l,1:d}=(0,r.useState)(null),{0:s,1:c}=(0,r.useState)(null),{0:p,1:u}=(0,r.useState)(!0),{0:m,1:b}=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{u(!0);try{var e,n;const{data:r}=await a.ND.auth.getSession(),i=r.session;if(d(i),null==i||!i.user)return(0,o.navigate)("/sign-in"),b(!1),void c(null);const l=null!==(e=null===(n=i.user.user_metadata)||void 0===n?void 0:n.role)&&void 0!==e?e:"member";if(c(l),"string"==typeof t)b(l===t||"member"===t&&!!l);else{const e=t[l];b(!!e)}}catch(r){console.error("RoleRoutes check error:",r),b(!1)}finally{u(!1)}})()},[t]);const g={allowed:m,loading:p,session:l,role:s};return"function"==typeof n?r.createElement(r.Fragment,null,n(g)):((0,r.useEffect)(()=>{if(!p&&s)if("string"==typeof t)m||(0,o.navigate)(i);else{const e=t[s];e?!m&&e.onFalse?(0,o.navigate)(e.onFalse):m&&e.onTrue&&(0,o.navigate)(e.onTrue):(0,o.navigate)(i)}},[p,m,s,t,i]),p?null:m||"string"!=typeof t?r.createElement(r.Fragment,null,n):null)}},3641:function(e,n,t){t.d(n,{A:function(){return i}});var r=t(6540),a=t(8697),o=t(9230);function i(e){let{title:n="Tinh Hoa Viá»‡t CMS",onThemeChange:t,theme:i,setTheme:l,navOpen:d,setNavOpen:s}=e;const{0:c,1:p}=(0,r.useState)(!1),u=(0,r.useRef)(null);return(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&p(!1)};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[]),(0,r.useEffect)(()=>{document.body.dataset.theme=i,null==t||t(i)},[i,t]),r.createElement(r.Fragment,null,r.createElement("style",null,"\n        header {\n          background: var(--panel); border-bottom: 1px solid var(--border);\n          padding: 12px 20px; display: flex; align-items: center;\n          justify-content: space-between; position: sticky; top: 0; z-index: 30;\n        }\n        .brand { display: flex; align-items: center; gap: 8px;\n          font-weight: 600; color: var(--text); font-size: 14px;}\n        .brand-icon { width: 24px; height: 24px;\n          background: linear-gradient(135deg, #10b981, #059669);\n          border-radius: 3px;}\n        .actions { display: flex; align-items: center; gap: 10px;}\n        .dropdown { position: relative; }\n        .menu { position: absolute; top: 110%; right: 0; background: var(--panel);\n          border: 1px solid var(--border); border-radius: 8px;\n          box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n          width: 160px; overflow: hidden; z-index: 50; display: none;}\n        .menu.open { display: block; }\n        .menu button { width: 100%; justify-content: flex-start;\n          background: none; border-radius: 0; }\n        .menu button:hover { background: var(--accent-bg); }\n        .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n      "),r.createElement("header",null,r.createElement("div",{className:"brand"},r.createElement("button",{onClick:()=>s(!d),style:{background:"none",border:"none",cursor:"pointer"}},d?r.createElement(a.A,{size:18}):r.createElement(o.A,{size:18})),r.createElement("div",{className:"brand-icon"}),n),r.createElement("div",{className:"actions"})))}},7392:function(e,n,t){t.r(n),t.d(n,{default:function(){return u}});var r=t(6540),a=t(2479),o=t(1302),i=t(6898);const l={padding:"10px",fontWeight:"600",fontSize:"14px",textAlign:"left",borderBottom:"1px solid var(--border)"},d={padding:"10px",fontSize:"14px",borderBottom:"1px solid #eee"};function s(e){return null==e?"0":e.toLocaleString("vi-VN")}const c=e=>{let{label:n,value:t}=e;return r.createElement("div",{style:{padding:"20px",background:"#fff",border:"1px solid var(--border)",borderRadius:"10px",boxShadow:"0 1px 4px rgba(0,0,0,0.08)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},r.createElement("span",{style:{opacity:.7,fontSize:"14px",marginBottom:"6px"}},n),r.createElement("strong",{style:{fontSize:"26px"}},t))};var p=()=>{const{0:e,1:n}=(0,r.useState)(null),{0:t,1:a}=(0,r.useState)(null),{0:o,1:p}=(0,r.useState)([]),{0:u,1:m}=(0,r.useState)(!0);(0,r.useEffect)(()=>{!async function(){const{data:e,error:n}=await i.ND.rpc("revenue_stats");console.log(e),n?console.error("Error fetching revenue stats:",n):a(e),m(!1)}()},[]),(0,r.useEffect)(()=>{!async function(){var e,t;const{data:r}=await i.ND.rpc("signup_stats",{tz:"Asia/Ho_Chi_Minh",exclude_pattern:null,min_created_at:"2025-11-17 07:18:00+07"}),o=Array.isArray(r)&&r.length>0?null!==(e=null===(t=r[0])||void 0===t?void 0:t.signup_stats)&&void 0!==e?e:null:r;n(o);const{data:l}=await i.ND.rpc("revenue_stats",{});a(l);const{data:d,error:s}=await i.ND.from("event_with_email").select("*").eq("paid",!0).order("created_at",{ascending:!1}).limit(10);if(!s&&d){const e=d.map(e=>{var n;const t=new Intl.DateTimeFormat("vi-VN",{dateStyle:"short",timeStyle:"medium"}).format(new Date(e.created_at));return{id:e.id,price:e.price,note:e.note,created_at:e.created_at,created_at_vn:t,email:null!==(n=e.email)&&void 0!==n?n:"Unknown"}});p(e)}m(!1)}()},[]);const b={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginTop:"30px"};return r.createElement("div",{style:{padding:"40px"}},r.createElement("h2",{style:{marginBottom:"20px"}},"Dashboard"),u&&r.createElement("p",null,"Loadingâ€¦"),!u&&r.createElement(r.Fragment,null,r.createElement("br",null)," ",r.createElement("br",null)," ",r.createElement("br",null),r.createElement("h3",{style:{marginTop:"40px",marginBottom:"10px"}},"Signups"),e&&r.createElement("div",{style:b},r.createElement(c,{label:"Today",value:e.today}),r.createElement(c,{label:"Yesterday",value:e.yesterday}),r.createElement(c,{label:"This Week",value:e.this_week}),r.createElement(c,{label:"Last Week",value:e.last_week}),r.createElement(c,{label:"This Month",value:e.this_month}),r.createElement(c,{label:"Last Month",value:e.last_month})),t&&r.createElement(r.Fragment,null,r.createElement("h3",{style:{marginTop:"40px",marginBottom:"10px"}},"Revenue"),r.createElement("div",{style:b},r.createElement(c,{label:"Total Revenue (VND)",value:s(t.total_revenue)}),Object.entries(t.revenue_by_type||{}).map(e=>{let[n,t]=e;return r.createElement(c,{key:"rev-"+n,label:"Revenue "+n,value:s(t)})}),Object.entries(t.count_by_type||{}).map(e=>{let[n,t]=e;return r.createElement(c,{key:"cnt-"+n,label:"Count "+n,value:t})}))),r.createElement("h3",{style:{marginTop:"50px",marginBottom:"10px"}},"Last 10 Payments"),r.createElement("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"10px",background:"#fff",borderRadius:"10px",overflow:"hidden"}},r.createElement("thead",{style:{background:"var(--border)"}},r.createElement("tr",null,r.createElement("th",{style:l},"Email"),r.createElement("th",{style:l},"Time (VN)"),r.createElement("th",{style:l},"Price"),r.createElement("th",{style:l},"Ticket Type"))),r.createElement("tbody",null,o.map(e=>{return r.createElement("tr",{key:e.id},r.createElement("td",{style:d},e.email),r.createElement("td",{style:d},e.created_at_vn),r.createElement("td",{style:d},s(Number(e.price))),r.createElement("td",{style:d},{TYPE_I:"AI Image",TYPE_II:"AI Video",TYPE_III:"AI Image & Video"}[n=e.note]||n));var n})))))};function u(){return r.createElement(a.A,{role:"admin"},r.createElement(o.A,null,r.createElement(p,null)))}},7490:function(e,n,t){t.d(n,{X:function(){return r}});const r=function(e){return void 0===e&&(e=!1),"\n  body, html { margin: 0; font-family: 'Inter', sans-serif; }\n  .app { min-height: 100vh; background: var(--bg); color: var(--text);\n    transition: background .3s, color .3s; overflow-x: hidden;}\n  .app.light {\n    --bg: #f8fafc; --panel: #ffffff; --border: rgba(0,0,0,0.08);\n    --text: #111827; --muted: #6b7280; --accent: #10b981;\n    --accent-bg: rgba(16,185,129,0.1);\n  }\n  .app.dark {\n    --bg: #0f1318; --panel: #0b0f14; --border: rgba(255,255,255,0.08);\n    --text: #d1d5db; --muted: #9ca3af; --accent: #10b981;\n    --accent-bg: rgba(16,185,129,0.15);\n  }\n\n  header {\n    background: var(--panel); border-bottom: 1px solid var(--border);\n    padding: 12px 20px; display: flex; align-items: center;\n    justify-content: space-between; position: sticky; top: 0; z-index: 30;\n    overflow: hidden; /* keep layout stable during nav animation */\n  }\n\n  .brand { \n    display: inline-flex; align-items: center; gap: 8px;\n    font-weight: 600; color: var(--text); font-size: 14px;\n    white-space: nowrap; overflow: hidden; flex-shrink: 0;\n  }\n  /* âœ… explicitly protect hamburger icon */\n  .brand button.hamburger {\n    all: unset;                /* ignore global button resets */\n    display: flex; align-items: center; justify-content: center;\n    width: 28px; height: 28px;\n    cursor: pointer; color: var(--text);\n    flex-shrink: 0;\n  }\n\n  .brand-icon { width: 24px; height: 24px;\n    background: linear-gradient(135deg, #10b981, #059669);\n    border-radius: 3px; flex-shrink: 0; }\n\n  .actions { display: flex; align-items: center; gap: 10px;}\n\n  .search-box { position: relative; }\n  .search-box input {\n    background: var(--panel); border: 1px solid var(--border);\n    border-radius: 4px; color: var(--text);\n    padding: 7px 8px 7px 30px; width: 200px; font-size: 13px;\n    outline: none; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n  }\n  .search-icon {\n    position: absolute; left: 8px; top: 50%;\n    transform: translateY(-50%); opacity: .6; color: var(--muted);\n  }\n\n  button {\n    border: none; border-radius: 5px; font-size: 13px; padding: 7px 12px;\n    cursor: pointer; background: var(--panel); color: var(--text);\n    display: flex; align-items: center; gap: 6px; transition: all .2s;\n  }\n  button:hover { background: var(--accent-bg); }\n  .primary-btn { background: var(--accent); color: #072c21; font-weight: 500;}\n\n  main { max-width: 1100px; margin: 30px auto; padding: 0 20px;}\n  section { background: var(--panel); border: 1px solid var(--border);\n    border-radius: 10px; overflow: hidden;}\n\n  .table-header {\n    display: flex; justify-content: space-between; align-items: center;\n    padding: 12px 16px; border-bottom: 1px solid var(--border);\n  }\n\n  table { width: 100%; border-collapse: collapse; font-size: 13px; }\n  th, td {\n    text-align: left; padding: 8px 16px; border-bottom: 1px solid var(--border);\n    white-space: nowrap; overflow: hidden; text-overflow: ellipsis;\n    max-width: 180px;\n  }\n  th { color: var(--muted); font-size: 11px; text-transform: uppercase; }\n  td:hover { overflow: visible; white-space: normal; }\n  td[title]:hover::after {\n    content: attr(title);\n    position: absolute; background: var(--panel); color: var(--text);\n    border: 1px solid var(--border); padding: 6px 8px; border-radius: 5px;\n    white-space: normal; z-index: 999; box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n  }\n  tr:hover { background: var(--accent-bg); }\n\n  .pill { display: inline-flex; align-items: center; gap: 5px;\n    border-radius: 5px; padding: 2px 8px; font-size: 11px; }\n  .pill.Approved { background: rgba(16,185,129,0.15); color: #10b981; }\n  .pill.Pending { background: rgba(245,158,11,0.15); color: #f59e0b; }\n  .pill[\"Under Review\"] { background: rgba(59,130,246,0.15); color: #3b82f6; }\n\n  footer { text-align: center; color: var(--muted); font-size: 12px;\n    margin: 40px 0 20px;}\n\n  .dropdown { position: relative; }\n  .menu {\n    position: absolute; top: 110%; right: 0; background: var(--panel);\n    border: 1px solid var(--border); border-radius: 8px;\n    box-shadow: 0 4px 10px rgba(0,0,0,0.2);\n    width: 160px; overflow: hidden; z-index: 50; display: none;\n  }\n  .menu.open { display: block; }\n  .menu button { width: 100%; justify-content: flex-start;\n    background: none; border-radius: 0; }\n  .menu button:hover { background: var(--accent-bg); }\n  .menu hr { border: none; border-top: 1px solid var(--border); margin: 4px 0; }\n\n  .sidenav-overlay {\n    position: fixed; top: 0; left: 0; height: 100%;\n    width: "+(e?"220px":"0")+";\n    background: var(--panel); border-right: 1px solid var(--border);\n    overflow: hidden; transition: width .25s ease-in-out; z-index: 40;\n    display: flex; flex-direction: column; padding: "+(e?"20px":"0")+";\n  }\n  .sidenav-overlay button {\n    background: none; border: none; color: var(--text);\n    text-align: left; padding: 8px; font-size: 14px; border-radius: 6px;\n  }\n  .sidenav-overlay button:hover { background: var(--accent-bg); }\n  .nav-backdrop {\n    position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 35;\n    opacity: "+(e?"1":"0")+";\n    pointer-events: "+(e?"auto":"none")+";\n    transition: opacity .2s;\n  }\n"}},8697:function(e,n,t){t.d(n,{A:function(){return r}});const r=(0,t(9407).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9230:function(e,n,t){t.d(n,{A:function(){return r}});const r=(0,t(9407).A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]])},9407:function(e,n,t){t.d(n,{A:function(){return s}});var r=t(6540);const a=e=>{const n=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase()))(e);return n.charAt(0).toUpperCase()+n.slice(1)},o=(...e)=>e.filter((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim(),i=e=>{for(const n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const d=(0,r.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:d="",children:s,iconNode:c,...p},u)=>(0,r.createElement)("svg",{ref:u,...l,width:n,height:n,stroke:e,strokeWidth:a?24*Number(t)/Number(n):t,className:o("lucide",d),...!s&&!i(p)&&{"aria-hidden":"true"},...p},[...c.map(([e,n])=>(0,r.createElement)(e,n)),...Array.isArray(s)?s:[s]])),s=(e,n)=>{const t=(0,r.forwardRef)(({className:t,...i},l)=>{return(0,r.createElement)(d,{ref:l,iconNode:n,className:o(`lucide-${s=a(e),s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...i});var s});return t.displayName=a(e),t}}}]);
//# sourceMappingURL=component---src-pages-cms-index-tsx-487b5e2e54041a4d9479.js.map