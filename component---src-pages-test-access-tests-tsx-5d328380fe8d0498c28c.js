"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5402],{8914:function(e,a,s){s.r(a),s.d(a,{default:function(){return c}});var l=s(4506),t=s(6540),r=s(6898);const o=[{label:"user1",id:"f2d40632-3610-4039-ac46-9dda9b672497",email:"user1@test.com",password:"password1"},{label:"user2",id:"e04e38e0-7eed-4281-bc05-89fb6c9b30f1",email:"user2@test.com",password:"password1"},{label:"user3",id:"387899c3-fa8a-4582-b6dc-0833dfc02f40",email:"user3@test.com",password:"password1"}],n=["full_name","hometown","membership_level","profile_status","title","field_of_expertise"],i=["email","phone","address","profile_progress"];function c(){const{0:e,1:a}=(0,t.useState)([]),s=e=>a(a=>[].concat((0,l.A)(a),["["+(new Date).toLocaleTimeString()+"] "+e])),c=async e=>{const a=e?e.label:"public";s("\n=== Testing as "+a+" ===");try{if(e){const{error:a}=await r.ND.auth.signInWithPassword({email:e.email,password:e.password});if(a)return void s("❌ Login failed for "+e.email+": "+a.message);s("✅ Logged in as "+e.email)}else await r.ND.auth.signOut(),s("👤 Using public (anon) session");const{data:l,error:t}=await r.ND.from("user_member").select("*"),{data:c,error:d}=await r.ND.from("user_private").select("*");console.group("📊 Data for "+a),console.log("👥 user_member:",null!=l?l:t),console.log("🔐 user_private:",null!=c?c:d),console.groupEnd(),t&&s("🚫 user_member error: "+t.message),d&&s("🚫 user_private error: "+d.message);const u=null!=l?l:[],p=null!=c?c:[];o.forEach((e,l)=>{var t,r;l>0&&s("\n");const o=null!==(t=u.find(a=>a.id===e.id))&&void 0!==t?t:{},c=null!==(r=p.find(a=>a.id===e.id))&&void 0!==r?r:{};n.forEach(l=>{const t=o[l];s(null!=t?a+" was allowed access to "+e.label+" member-field "+l+" ("+t+")":a+" was NOT allowed access to "+e.label+" member-field "+l+" (unknown)")}),i.forEach(l=>{const t=c[l];s(null!=t?a+" was allowed access to "+e.label+" private-field "+l+" ("+t+")":a+" was NOT allowed access to "+e.label+" private-field "+l+" (unknown)")})}),await r.ND.auth.signOut(),s("--- End test for "+a+" --- ✅")}catch(l){s("❌ Unexpected error during "+a+" test: "+l.message),console.error(l),await r.ND.auth.signOut()}};return t.createElement("div",{style:{fontFamily:"monospace",padding:20,maxWidth:900,margin:"auto",color:"white"}},t.createElement("h2",null,"🔒 Access Control / Split-Table (Members vs Private)"),t.createElement("div",{style:{display:"flex",gap:8,flexWrap:"wrap"}},o.map(e=>t.createElement("button",{key:e.email,onClick:()=>c(e),style:{padding:"8px 12px"}},"Test as ",e.label)),t.createElement("button",{onClick:()=>c(null),style:{padding:"8px 12px"}},"Test as Public")),t.createElement("pre",{style:{background:"#000",color:"#0f0",padding:15,borderRadius:8,marginTop:20,height:500,fontSize:12,overflowY:"auto",whiteSpace:"pre-wrap"}},e.join("\n")))}}}]);
//# sourceMappingURL=component---src-pages-test-access-tests-tsx-5d328380fe8d0498c28c.js.map