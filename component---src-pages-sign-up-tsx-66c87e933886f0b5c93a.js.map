{"version":3,"file":"component---src-pages-sign-up-tsx-66c87e933886f0b5c93a.js","mappings":"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","sources":["webpack:///./src/database/functions.ts","webpack:///./src/database/session-repair.ts","webpack:///./src/componets/sign-up/SignUpV2.tsx","webpack:///./src/pages/sign-up.tsx"],"sourcesContent":["import { clearStaleSupabaseKeys } from \"./session-repair\";\nimport { supabase } from \"./supabaseClient\";\n\n\n\n\n\n\nexport const handleLogout = async ({ onSuccess, onFail } = {}) => {\n  console.log(\"üîê Logging out‚Ä¶\");\n\n  // Remove corrupted keys ONLY\n  clearStaleSupabaseKeys();\n\n  // Call Supabase logout\n  const { error } = await supabase.auth.signOut();\n\n  if (error) {\n    console.error(\"‚ùå Logout error:\", error);\n    return onFail?.(error.message);\n  }\n\n  // Clear *all* session keys (safe now)\n  clearStaleSupabaseKeys();\n\n  // Optionally wipe saved session map\n  localStorage.removeItem(\"__thv_valid_supabase_keys__\");\n\n  onSuccess?.();\n};\n\n\n\n\n\nexport const handleSignup = async ({\n  email,\n  password,\n  fullName,\n  onSuccess,\n  onFail,\n}: {\n  email: string\n  password: string\n  fullName?: string\n  onSuccess?: () => void\n  onFail?: (error?: string) => void\n}) => {\n  const { data, error } = await supabase.auth.signUp({\n    email,\n    password,\n    options: {\n      data: {\n        full_name: fullName || \"unknown\",\n        signup_source: \"thv-web\", // optional\n      },\n    },\n  })\n\n  if (error) onFail?.(error.message)\n  else onSuccess?.()\n}\n\n\nexport const handleLogin = async (\n  { email, password, onSuccess, onFail }: {\n    email: string\n    password: string\n    onSuccess?: () => void\n    onFail?: (error?: string) => void\n  }\n) => {\n  const { data, error } = await supabase.auth.signInWithPassword({ email, password })\n  if (error) onFail?.(error.message)\n  else onSuccess?.()\n}\n\nexport const handleResetPassword = async (\n  { email, onSuccess, onFail }: {\n    email: string\n    onSuccess?: () => void\n    onFail?: (error?: string) => void\n  }\n) => {\n  const { data, error } = await supabase.auth.resetPasswordForEmail(email)\n  if (error) onFail?.(error.message)\n  else onSuccess?.()\n}\n\nexport const handleUpdatePassword = async (\n  { newPassword, onSuccess, onFail }: {\n    newPassword: string\n    onSuccess?: () => void\n    onFail?: (error?: string) => void\n  }\n) => {\n  const { data, error } = await supabase.auth.updateUser({ password: newPassword })\n  if (error) onFail?.(error.message)\n  else onSuccess?.()\n}\n\n\n\nexport interface UpdateUserData {\n  fullName?: string;\n  phone?: string;\n  email?: string;\n  dob?: string;\n  address?: string;\n  hometown?: string;\n  field?: string;\n  goals?: string;\n  vision?: string;\n  status?: string;\n  avatar?: string;\n}\n\n/**\n * Updates user profile data across both tables: user_member & user_private\n * Automatically maps field names to Supabase column names.\n */\nexport const updateUserProfile = async (updates: UpdateUserData) => {\n  try {\n    const { data: { user } } = await supabase.auth.getUser();\n    if (!user) throw new Error('Not logged in');\n\n    const memberPayload: any = {};\n    const privatePayload: any = {};\n\n    if (updates.fullName) memberPayload.full_name = updates.fullName;\n    if (updates.hometown) memberPayload.hometown = updates.hometown;\n    if (updates.field) memberPayload.field_of_expertise = updates.field;\n    if (updates.status) memberPayload.profile_status = updates.status;\n    if (updates.avatar) memberPayload.avatar_url = updates.avatar;\n\n    if (updates.phone) privatePayload.phone = updates.phone;\n    if (updates.email) privatePayload.email = updates.email;\n    if (updates.address) privatePayload.address = updates.address;\n    if (updates.dob) privatePayload.dob = updates.dob;\n    if (updates.goals) privatePayload.personal_goals = updates.goals;\n    if (updates.vision) privatePayload.future_vision = updates.vision;\n\n    // Run updates separately depending on which data is provided\n    if (Object.keys(memberPayload).length > 0)\n      await supabase.from('user_member').update(memberPayload).eq('id', user.id);\n\n    if (Object.keys(privatePayload).length > 0)\n      await supabase.from('user_private').update(privatePayload).eq('id', user.id);\n\n    return { success: true };\n  } catch (error) {\n    console.error('Update user profile failed:', error);\n    return { success: false, error };\n  }\n};\n","export function getSupabaseAuthKeys() {\n  return Object.keys(localStorage).filter(k =>\n    k.startsWith(\"sb-\") && k.includes(\"-auth-token\")\n  );\n}\n\n// Save session keys after successful login\nexport function saveValidSupabaseKeys() {\n  const keys = getSupabaseAuthKeys();\n  if (keys.length === 0) return;\n\n  const store: Record<string, string> = {};\n  keys.forEach(k => (store[k] = localStorage.getItem(k) || \"\"));\n\n  localStorage.setItem(\"__thv_valid_supabase_keys__\", JSON.stringify(store));\n}\n\n// Restore missing / damaged keys BEFORE login\nexport function repairSupabaseKeysIfBroken() {\n  const saved = localStorage.getItem(\"__thv_valid_supabase_keys__\");\n  if (!saved) return;\n\n  const good = JSON.parse(saved);\n  Object.keys(good).forEach(k => {\n    if (!localStorage.getItem(k)) {\n      console.log(\"üõ† Restoring missing Supabase key:\", k);\n      localStorage.setItem(k, good[k]);\n    }\n  });\n}\n\n// Remove corrupted keys\nexport function clearStaleSupabaseKeys() {\n  const saved = JSON.parse(localStorage.getItem(\"__thv_valid_supabase_keys__\") || \"{}\");\n  const current = getSupabaseAuthKeys();\n\n  current.forEach(k => {\n    if (!saved[k]) {\n      console.log(\"üß® Removing stale Supabase key:\", k);\n      localStorage.removeItem(k);\n    }\n  });\n}\n","import React, { useState, useEffect } from 'react';\nimport { navigate } from 'gatsby';\nimport './sign-up.css';\nimport { FiArrowRight } from 'react-icons/fi';\nimport { handleSignup } from '../../database/functions';\n\n// Email tracking enum\nexport const RESEND_SOURCES = {\n  THV: \"tinh-hoa-viet\",\n  AID: \"aid\",\n} as const;\n\nexport type ResendSource = typeof RESEND_SOURCES[keyof typeof RESEND_SOURCES];\nconst EMAIL_SOURCE: ResendSource = RESEND_SOURCES.THV;\n\nconsole.log(\"üîç EMAIL_SOURCE (top-level) =\", EMAIL_SOURCE);\n\nconst i18n = {\n  EN: {\n    brandTitle: 'TINH HOA VI·ªÜT',\n    tagline: \"Where Vietnamese Excellence Meets Global Recognition\",\n    features: ['Premium Vietnamese Heritage', 'Global Excellence Standards', 'Elite Community Access'],\n    begin: 'Create Your Account',\n    sub: 'Join the platform that recognizes Vietnamese excellence',\n    fullName: 'Full Name',\n    email: 'Email Address',\n    password: 'Password',\n    confirmPassword: 'Confirm Password',\n    passwordHint: 'At least 8 characters with numbers and symbols',\n    terms1: 'I agree to the ',\n    tos: 'Terms of Service',\n    and: ' and ',\n    privacy: 'Privacy Policy',\n    submit: 'Create Account',\n    have: 'Already part of our community? ',\n    login: 'Sign In to Your Account',\n    langEN: 'EN',\n    langVN: 'VN',\n  },\n  VN: {\n    brandTitle: 'TINH HOA VI·ªÜT',\n    tagline: 'N∆°i t√¥n vinh tinh hoa Vi·ªát Nam v∆∞∆°n t·∫ßm qu·ªëc t·∫ø',\n    features: ['Di s·∫£n Vi·ªát Nam ƒë·∫≥ng c·∫•p', 'Chu·∫©n m·ª±c xu·∫•t s·∫Øc to√†n c·∫ßu', 'C·ªông ƒë·ªìng tinh hoa'],\n    begin: 'T·∫°o T√†i Kho·∫£n',\n    sub: 'Tham gia n·ªÅn t·∫£ng t√¥n vinh tinh hoa Vi·ªát',\n    fullName: 'H·ªç v√† T√™n',\n    email: 'ƒê·ªãa ch·ªâ Email',\n    password: 'M·∫≠t kh·∫©u',\n    confirmPassword: 'X√°c nh·∫≠n m·∫≠t kh·∫©u',\n    passwordHint: 'T·ªëi thi·ªÉu 8 k√Ω t·ª±, c√≥ s·ªë v√† k√Ω hi·ªáu',\n    terms1: 'T√¥i ƒë·ªìng √Ω v·ªõi ',\n    tos: 'ƒêi·ªÅu kho·∫£n D·ªãch v·ª•',\n    and: ' v√† ',\n    privacy: 'Ch√≠nh s√°ch B·∫£o m·∫≠t',\n    submit: 'T·∫°o T√†i Kho·∫£n Tinh Hoa',\n    have: 'ƒê√£ c√≥ t√†i kho·∫£n? ',\n    login: 'ƒêƒÉng nh·∫≠p t√†i kho·∫£n',\n    langEN: 'EN',\n    langVN: 'VN',\n  }\n};\n\nconst SignUpV2: React.FC = () => {\n  useEffect(() => {\n    console.log(\"üî• SignUpV2 component mounted\");\n    console.log(\"üîç EMAIL_SOURCE =\", EMAIL_SOURCE);\n  }, []);\n\n  const [formData, setFormData] = useState({\n    fullName: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n    agree: false\n  });\n\n  const [language, setLanguage] = useState<'EN' | 'VN'>('EN');\n  const [message, setMessage] = useState('');\n  const [submitting, setSubmitting] = useState(false);\n  const t = i18n[language];\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({ ...prev, [name]: type === 'checkbox' ? checked : value }));\n  };\n  const onSuccess = async () => {\n  console.log(\"üì® Signup success for:\", formData.email);\n\n  // prevent button from ever coming back\n  setSubmitting(true);\n  setMessage(\"‚úÖ Check your email for a verification link!\");\n\n  try {\n    const { emailUsageForm } = await import('../../forms/email-usage');\n    await emailUsageForm.submit({\n      source: EMAIL_SOURCE,\n      request: \"signup-email\",\n      email: formData.email\n    });\n  } catch (err) {\n    console.error(\"üî• Email usage logging FAILED:\", err);\n  }\n\n  navigate('/check-email');\n};\n\n\n  const onFail = (err?: string) => {\n    console.warn(\"‚ùå Signup failed:\", err);\n    setMessage('‚ùå ' + (err || 'Signup failed. Please try again.'));\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (submitting) return;\n\n    setMessage('');\n    setSubmitting(true);\n\n    if (!formData.agree) {\n      setMessage(language === 'EN'\n        ? '‚ùå You must agree to the Terms of Service'\n        : '‚ùå B·∫°n ph·∫£i ƒë·ªìng √Ω v·ªõi ƒêi·ªÅu kho·∫£n D·ªãch v·ª•');\n      setSubmitting(false);\n      return;\n    }\n\n    if (formData.password !== formData.confirmPassword) {\n      setMessage(language === 'EN'\n        ? '‚ùå Passwords do not match'\n        : '‚ùå M·∫≠t kh·∫©u kh√¥ng kh·ªõp');\n      setSubmitting(false);\n      return;\n    }\n\n    if (formData.password.length < 8) {\n      setMessage(language === 'EN'\n        ? '‚ùå Password must be at least 8 characters'\n        : '‚ùå M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 8 k√Ω t·ª±');\n      setSubmitting(false);\n      return;\n    }\n\n    console.log(\"üöÄ Calling handleSignup...\");\n    handleSignup({\n      email: formData.email,\n      password: formData.password,\n      fullName: formData.fullName,\n      onSuccess: () => {\n        setSubmitting(false);\n        onSuccess();\n      },\n      onFail: (err) => {\n        setSubmitting(false);\n        onFail(err);\n      }\n    });\n  };\n\n  return (\n    <div className=\"auth-shell\">\n      {/* Brand side */}\n      <aside className=\"brand-side\" aria-hidden>\n        <div className=\"brand-sheen\" />\n        <div className=\"brand-pattern\" />\n        <div className=\"brand-wrap\">\n          <h1 className=\"brand-name\">{t.brandTitle}</h1>\n          <p className=\"brand-tag\">{t.tagline}</p>\n          <ul className=\"brand-features\">\n            {t.features.map((f, i) => (\n              <li className=\"feature\" key={i}>\n                <span className=\"tick\">‚úì</span><span>{f}</span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </aside>\n\n      {/* Form side */}\n      <main className=\"form-side\">\n        <header className=\"form-top\">\n          <div className=\"lang-switch\">\n            <button className={`lang ${language === 'EN' ? 'active' : ''}`} onClick={() => setLanguage('EN')}>\n              {t.langEN}\n            </button>\n            <span className=\"mid\">|</span>\n            <button className={`lang ${language === 'VN' ? 'active' : ''}`} onClick={() => setLanguage('VN')}>\n              {t.langVN}\n            </button>\n          </div>\n        </header>\n\n        <section className=\"form-wrap\">\n          <div className=\"intro\">\n            <h2 className=\"title\">{t.begin}</h2>\n            <p className=\"subtitle\">{t.sub}</p>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"auth-form\" noValidate>\n            <div className=\"field\">\n              <label htmlFor=\"fullName\">{t.fullName} <span className=\"req\">*</span></label>\n              <input type=\"text\" id=\"fullName\" name=\"fullName\" value={formData.fullName} onChange={handleChange} required />\n            </div>\n\n            <div className=\"field\">\n              <label htmlFor=\"email\">{t.email} <span className=\"req\">*</span></label>\n              <input type=\"email\" id=\"email\" name=\"email\" value={formData.email} onChange={handleChange} required />\n            </div>\n\n            <div className=\"form-row\">\n              <div className=\"field\">\n                <label htmlFor=\"password\">{t.password} <span className=\"req\">*</span></label>\n                <input type=\"password\" id=\"password\" name=\"password\" value={formData.password} onChange={handleChange} required minLength={8} />\n                <small className=\"hint\">{t.passwordHint}</small>\n              </div>\n\n              <div className=\"field\">\n                <label htmlFor=\"confirmPassword\">{t.confirmPassword} <span className=\"req\">*</span></label>\n                <input type=\"password\" id=\"confirmPassword\" name=\"confirmPassword\" value={formData.confirmPassword} onChange={handleChange} required minLength={8} />\n              </div>\n            </div>\n\n            <div className=\"terms\">\n              <input type=\"checkbox\" id=\"agree\" name=\"agree\" checked={formData.agree} onChange={handleChange} required />\n              <label htmlFor=\"agree\">\n                {t.terms1}<a href=\"/terms-of-service\">{t.tos}</a>{t.and}<a href=\"/privacy-policy\">{t.privacy}</a>\n              </label>\n            </div>\n\n            <button type=\"submit\" className=\"cta\" disabled={submitting}>\n              <span>{submitting ? (language === 'EN' ? \"Processing‚Ä¶\" : \"ƒêang x·ª≠ l√Ω‚Ä¶\") : t.submit}</span>\n              {submitting ? (\n                <span className=\"btn-spinner\"></span>\n              ) : (\n                <FiArrowRight className=\"arrow\" />\n              )}\n            </button>\n\n            {message && <p style={{ textAlign: 'center', marginTop: 10, color: '#fff' }}>{message}</p>}\n\n            <p className=\"switch\">\n              {t.have}<a href=\"/sign-in\">{t.login}</a>\n            </p>\n          </form>\n        </section>\n      </main>\n    </div>\n  );\n};\n\nexport default SignUpV2;\n","import React from 'react'\nimport Signupform from '../componets/sign-up/SignUpV2'\nconst Signup = () => {\n \n  return (\n    <main >\n      <Signupform/>\n    </main>\n  )\n}\n\nexport default Signup\n"],"names":["handleLogout","async","onSuccess","onFail","console","log","clearStaleSupabaseKeys","error","supabase","auth","signOut","message","localStorage","removeItem","handleSignup","email","password","fullName","data","signUp","options","full_name","signup_source","handleLogin","signInWithPassword","handleResetPassword","resetPasswordForEmail","handleUpdatePassword","newPassword","updateUser","getSupabaseAuthKeys","Object","keys","filter","k","startsWith","includes","saveValidSupabaseKeys","length","store","forEach","getItem","setItem","JSON","stringify","repairSupabaseKeysIfBroken","saved","good","parse","EMAIL_SOURCE","i18n","EN","brandTitle","tagline","features","begin","sub","confirmPassword","passwordHint","terms1","tos","and","privacy","submit","have","login","langEN","langVN","VN","SignUpV2","useEffect","formData","setFormData","useState","agree","language","setLanguage","setMessage","submitting","setSubmitting","t","handleChange","e","name","value","type","checked","target","prev","React","className","map","f","i","key","onClick","onSubmit","preventDefault","emailUsageForm","source","request","err","navigate","warn","noValidate","htmlFor","id","onChange","required","minLength","href","disabled","FiArrowRight","style","textAlign","marginTop","color","Signup","Signupform"],"sourceRoot":""}