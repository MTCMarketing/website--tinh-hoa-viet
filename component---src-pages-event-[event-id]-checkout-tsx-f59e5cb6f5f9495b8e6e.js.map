{"version":3,"file":"component---src-pages-event-[event-id]-checkout-tsx-f59e5cb6f5f9495b8e6e.js","mappings":"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","sources":["webpack:///./src/componets/CheckOut.tsx","webpack:///./src/pages/event/[event-id]/checkout.tsx","webpack:///./src/content/events.ts"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport \"./log-in/login.css\";\nimport { FiArrowRight, FiCheckCircle } from \"react-icons/fi\";\nimport { QRCodeCanvas } from \"qrcode.react\";\nimport { events } from \"../content/events\";\nimport { supabase } from \"../database/supabaseClient\";\n\nconst i18n = events['aid-cuisine'];\n\n// Pretty logger\nconst LOG = (...args: any[]) =>\n  console.log(\"%c[CHECKOUT]\", \"color:#FFD700; font-weight:bold;\", ...args);\n\nconst EventPayment: React.FC = () => {\n  LOG(\"üîÑ Component RENDER START\");\n\n  // üîê AUTH\n  const [user, setUser] = useState<any>(null);\n  const [authLoading, setAuthLoading] = useState(true);\n\n  // üí∏ PAYMENT\n  const [language, setLanguage] = useState<\"EN\" | \"VN\">(\"EN\");\n  const [loading, setLoading] = useState(false);\n  const [isPaid, setIsPaid] = useState(false);\n  const [qrData, setQrData] = useState<any>(null);\n  const [transactionId, setTransactionId] = useState<string | null>(null);\n  const [testLoading, setTestLoading] = useState(false);\n\n  // üÜï Ticket type selection\n  const [ticketType, setTicketType] = useState<\"I\" | \"II\" | \"III\">(\"I\");\n\n  const t = i18n[language];\n\n  const hydrated = !authLoading;\n  const isLoggedInSafe = hydrated && !!user;\n\n  LOG(\"üñ® AUTH SNAPSHOT\", { user, authLoading, hydrated, isLoggedInSafe });\n\n  /* ============================================================\n     DYNAMIC PRICE\n  ============================================================ */\n  const getSelectedPrice = () => {\n    if (ticketType === \"I\") return \"200.000‚Ç´\";\n    if (ticketType === \"II\") return \"200.000‚Ç´\";\n    if (ticketType === \"III\") return \"400.000‚Ç´\";\n    return \"‚Äî\";\n  };\n\n  /* ============================================================================\n     AUTH INIT\n  ============================================================================ */\n  useEffect(() => {\n    LOG(\"üîê AUTH EFFECT MOUNTED\");\n\n    let cancelled = false;\n\n    const hydrate = async () => {\n      LOG(\"üîê Calling supabase.auth.getSession()‚Ä¶\");\n\n      try {\n        const { data, error } = await supabase.auth.getSession();\n        LOG(\"üîê getSession() result:\", { data, error });\n\n        if (cancelled) return;\n\n        if (data?.session?.user) {\n          setUser(data.session.user);\n        } else {\n          setUser(null);\n        }\n\n        setAuthLoading(false);\n      } catch (err) {\n        setUser(null);\n        setAuthLoading(false);\n      }\n    };\n\n    hydrate();\n\n    const { data: listener } = supabase.auth.onAuthStateChange(\n      (_event, session) => {\n        if (session?.user) {\n          setUser(session.user);\n        } else {\n          setUser(null);\n        }\n        setAuthLoading(false);\n      }\n    );\n\n    return () => {\n      cancelled = true;\n      listener.subscription.unsubscribe();\n    };\n  }, []);\n\n  /* ============================================================================\n     REALTIME VietQR LISTENER\n  ============================================================================ */\n  useEffect(() => {\n    if (!user) return;\n\n    const channel = supabase\n      .channel(\"public:messages\")\n      .on(\n        \"postgres_changes\",\n        { event: \"INSERT\", schema: \"public\", table: \"messages\" },\n        (payload) => {\n          try {\n            const eventType = payload.new.event_type;\n            const eventPayload = payload.new.payload;\n\n            if (eventType !== \"vietqr_callback\") return;\n\n            const orderId = eventPayload?.orderId;\n\n            if (orderId !== user.id) return;\n\n            setIsPaid(true);\n            setQrData(null);\n            setTransactionId(eventPayload.transactionid || null);\n          } catch {}\n        }\n      )\n      .subscribe();\n\n    return () => {\n      supabase.removeChannel(channel);\n    };\n  }, [user?.id]);\n\n  /* ============================================================================\n     PAYMENT HANDLER\n  ============================================================================ */\n  const handlePayment = async () => {\n    if (!isLoggedInSafe || !user) {\n      window.location.href = \"/sign-up\";\n      return;\n    }\n\n    try {\n      setLoading(true);\n      console.log(user.email);\n      const res = await fetch(\n        \"https://integrations.tinhhoaviet.org.vn/vietqr/payment-intent\",\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify({\n            user_id: user.id,\n            user_email: user.email,  // ‚Üê add this\n            ticket_type: ticketType,\n          }),\n        }\n      );\n\n      if (!res.ok) throw new Error(\"Payment request failed.\");\n\n      const data = await res.json();\n\n      if (data?.qrDataURL || data?.qrCode || data?.qrLink) {\n        setQrData(data);\n      } else {\n        alert(\"QR code missing in response.\");\n      }\n    } catch (err) {\n      alert(\"Payment failed.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  /* ============================================================================\n     TEST CALLBACK\n  ============================================================================ */\n  const handleTestPayment = async () => {\n    if (!qrData) {\n      alert(\"No QR code available.\");\n      return;\n    }\n\n    const payload2 = {\n      bankAccount: qrData.bankAccount,\n      content: qrData.content,\n      amount: qrData.amount,\n      bankCode: qrData.bankCode,\n      transType: \"C\",\n    };\n\n    try {\n      setTestLoading(true);\n\n      const res = await fetch(\n        \"https://integrations.tinhhoaviet.org.vn/vietqr/test-success\",\n        {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/json\" },\n          body: JSON.stringify(payload2),\n        }\n      );\n\n      console.log(await res.text());\n    } catch (err) {\n    } finally {\n      setTestLoading(false);\n    }\n  };\n\n  /* ============================================================================\n     RENDER\n  ============================================================================ */\n\n  return (\n    <div className=\"auth-shell\">\n      <aside className=\"brand-side\">\n        <div className=\"brand-sheen\" />\n        <div className=\"brand-pattern\" />\n        <div className=\"brand-wrap\">\n          <h1 className=\"brand-name\">{t.brandTitle}</h1>\n          <p className=\"brand-tag\">{t.tagline}</p>\n          <ul className=\"brand-features\">\n            {t.features.map((f: any, i: number) => (\n              <li key={i} className=\"feature\">\n                <span className=\"tick\">‚úì</span>\n                <span>{f}</span>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </aside>\n\n      <main className=\"form-side\">\n        <header className=\"form-top\">\n          <div className=\"lang-switch\">\n            <button\n              className={`lang ${language === \"EN\" ? \"active\" : \"\"}`}\n              onClick={() => setLanguage(\"EN\")}\n            >\n              {t.langEN}\n            </button>\n            <span className=\"mid\">|</span>\n            <button\n              className={`lang ${language === \"VN\" ? \"active\" : \"\"}`}\n              onClick={() => setLanguage(\"VN\")}\n            >\n              {t.langVN}\n            </button>\n          </div>\n        </header>\n\n        <section className=\"form-wrap\" style={{ color: \"var(--off-white)\" }}>\n          <div className=\"intro\">\n            <h2 className=\"title\" style={{ color: \"var(--off-white)\" }}>\n              {t.title}\n            </h2>\n            <p className=\"subtitle\" style={{ color: \"var(--light-gray)\" }}>\n              {t.subtitle}\n            </p>\n          </div>\n\n          <div className=\"auth-form\" style={{ textAlign: \"center\" }}>\n            <div className=\"field\">\n              <h3\n                style={{\n                  color: \"var(--gold-2)\",\n                  fontSize: 22,\n                  marginBottom: 6,\n                }}\n              >\n                {t.eventName}\n              </h3>\n\n              <p style={{ color: \"var(--off-white)\" }}>{t.date}</p>\n              <p style={{ color: \"var(--off-white)\" }}>{t.location}</p>\n\n              <p\n                style={{\n                  fontWeight: 700,\n                  marginTop: 10,\n                  color: \"var(--off-white)\",\n                  fontSize: \"1.1rem\",\n                }}\n              >\n                {language === \"EN\" ? \"Ticket Price: \" : \"Gi√° v√©: \"}\n                {getSelectedPrice()}\n              </p>\n            </div>\n\n            {/* CATEGORY SELECTOR */}\n            <div style={{ marginTop: 25, marginBottom: 25 }}>\n              <h4\n                style={{\n                  fontWeight: 700,\n                  marginBottom: 12,\n                  color: \"var(--gold-2)\",\n                }}\n              >\n                {language === \"EN\"\n                  ? \"Choose Entry Category\"\n                  : \"Ch·ªçn H·∫°ng M·ª•c Tham Gia\"}\n              </h4>\n\n              <div style={{ display: \"flex\", flexDirection: \"column\", gap: 12 }}>\n                {/* TYPE I */}\n                <label\n                  onClick={() => setTicketType(\"I\")}\n                  style={{\n                    padding: \"14px 18px\",\n                    borderRadius: 12,\n                    cursor: \"pointer\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 12,\n                    border:\n                      ticketType === \"I\"\n                        ? \"2px solid var(--gold-2)\"\n                        : \"1px solid var(--medium-gray)\",\n                  }}\n                >\n                  <span style={{ fontSize: \"1.6rem\" }}>üì∏</span>\n                  <div style={{ textAlign: \"left\", color: \"var(--off-white)\" }}>\n                    <div style={{ fontWeight: 700 }}>\n                      {language === \"EN\"\n                        ? 'A.I PHOTOSET \"FLAVORS OF THREE REGIONS\"'\n                        : 'B·ªò ·∫¢NH A.I \"H∆Ø∆†NG V·ªä BA MI·ªÄN\"'}\n                    </div>\n                    <div\n                      style={{\n                        color: \"var(--light-gray)\",\n                        fontSize: \"0.9rem\",\n                      }}\n                    >\n                      200.000‚Ç´\n                    </div>\n                  </div>\n                  <input\n                    type=\"radio\"\n                    checked={ticketType === \"I\"}\n                    readOnly\n                    style={{ marginLeft: \"auto\" }}\n                  />\n                </label>\n\n                {/* TYPE II */}\n                <label\n                  onClick={() => setTicketType(\"II\")}\n                  style={{\n                    padding: \"14px 18px\",\n                    borderRadius: 12,\n                    cursor: \"pointer\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 12,\n                    border:\n                      ticketType === \"II\"\n                        ? \"2px solid var(--gold-2)\"\n                        : \"1px solid var(--medium-gray)\",\n                  }}\n                >\n                  <span style={{ fontSize: \"1.6rem\" }}>üé•</span>\n                  <div style={{ textAlign: \"left\", color: \"var(--off-white)\" }}>\n                    <div style={{ fontWeight: 700 }}>\n                      {language === \"EN\"\n                        ? 'A.I SHORT VIDEO \"THE STORY OF VIETNAMESE CUISINE\"'\n                        : 'VIDEO A.I NG·∫ÆN \"C√ÇU CHUY·ªÜN M√ìN ƒÇN VI·ªÜT\"'}\n                    </div>\n                    <div\n                      style={{\n                        color: \"var(--light-gray)\",\n                        fontSize: \"0.9rem\",\n                      }}\n                    >\n                      200.000‚Ç´\n                    </div>\n                  </div>\n                  <input\n                    type=\"radio\"\n                    checked={ticketType === \"II\"}\n                    readOnly\n                    style={{ marginLeft: \"auto\" }}\n                  />\n                </label>\n\n                {/* TYPE III */}\n                <label\n                  onClick={() => setTicketType(\"III\")}\n                  style={{\n                    padding: \"14px 18px\",\n                    borderRadius: 12,\n                    cursor: \"pointer\",\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: 12,\n                    border:\n                      ticketType === \"III\"\n                        ? \"2px solid var(--gold-2)\"\n                        : \"1px solid var(--medium-gray)\",\n                  }}\n                >\n                  <span style={{ fontSize: \"1.6rem\" }}>üéØ</span>\n                  <div style={{ textAlign: \"left\", color: \"var(--off-white)\" }}>\n                    <div style={{ fontWeight: 700 }}>\n                      {language === \"EN\"\n                        ? \"Both categories above\"\n                        : \"C·∫£ hai h·∫°ng m·ª•c tr√™n\"}\n                    </div>\n                    <div\n                      style={{\n                        color: \"var(--light-gray)\",\n                        fontSize: \"0.9rem\",\n                      }}\n                    >\n                      400.000‚Ç´\n                    </div>\n                  </div>\n                  <input\n                    type=\"radio\"\n                    checked={ticketType === \"III\"}\n                    readOnly\n                    style={{ marginLeft: \"auto\" }}\n                  />\n                </label>\n              </div>\n            </div>\n\n            {/* PAID STATE */}\n            {isPaid ? (\n              <div\n                style={{\n                  marginTop: 20,\n                  color: \"var(--gold-2)\",\n                  fontWeight: 700,\n                  display: \"flex\",\n                  flexDirection: \"column\",\n                  alignItems: \"center\",\n                }}\n              >\n                <div style={{ display: \"flex\", alignItems: \"center\", gap: 8 }}>\n                  <FiCheckCircle size={22} /> {t.success}\n                </div>\n                {transactionId && (\n                  <p style={{ marginTop: 4, color: \"var(--off-white)\" }}>\n                    Transaction ID: <strong>{transactionId}</strong>\n                  </p>\n                )}\n              </div>\n            ) : (\n              <>\n                {/* QR DISPLAY */}\n                {qrData && (qrData.qrDataURL || qrData.qrCode) && (\n                  <div style={{ marginTop: 20 }}>\n                    <QRCodeCanvas\n                      value={qrData.qrDataURL || qrData.qrCode}\n                      size={220}\n                      includeMargin={true}\n                    />\n                    <p style={{ marginTop: 12, color: \"var(--gold-2)\" }}>\n                      Scan this code to complete your payment.\n                    </p>\n                  </div>\n                )}\n\n                {/* PAY BUTTON */}\n                {!qrData ? (\n                  <button\n                    className=\"cta\"\n                    onClick={handlePayment}\n                    disabled={loading}\n                    style={{\n                      opacity: loading ? 0.6 : 1,\n                      cursor: loading ? \"not-allowed\" : \"pointer\",\n                    }}\n                  >\n                    <span>\n                      {!hydrated\n                        ? \"Checking login...\"\n                        : !isLoggedInSafe\n                        ? language === \"EN\"\n                          ? \"Login / Sign Up\"\n                          : \"ƒêƒÉng nh·∫≠p / ƒêƒÉng k√Ω\"\n                        : loading\n                        ? t.loading\n                        : t.payBtn}\n                    </span>\n\n                    {isLoggedInSafe && !loading && hydrated && (\n                      <FiArrowRight className=\"arrow\" />\n                    )}\n                  </button>\n                ) : (\n                  <button\n                    className=\"cta\"\n                    onClick={handleTestPayment}\n                    disabled={testLoading}\n                    style={{\n                      backgroundColor: \"#00b37a\",\n                      marginTop: 10,\n                      opacity: testLoading ? 0.7 : 1,\n                    }}\n                  >\n                    {testLoading ? \"‚è≥\" : t.testBtn}\n                  </button>\n                )}\n              </>\n            )}\n          </div>\n        </section>\n      </main>\n    </div>\n  );\n};\n\nexport default EventPayment;\n","import React from \"react\";\nimport CheckOut from \"../../../componets/CheckOut\";\n\nexport default () => <CheckOut/>","\n\n\nexport const events : any = {\n    \"test\" : {\n        EN: {\n            brandTitle: 'TINH HOA VI·ªÜT',\n            tagline: 'Where Vietnamese Excellence Meets Global Recognition',\n            features: ['Exclusive Gala Event', 'Cultural Performances', 'Networking with Honorees'],\n            title: 'Event Ticket Payment',\n            subtitle: 'Complete your payment to confirm your attendance',\n            eventName: 'Vietnamese Excellence Gala 2025',\n            date: 'December 10, 2025 ‚Äì 7:00 PM',\n            location: 'Saigon Opera House, Ho Chi Minh City',\n            price: 'Ticket Price: 500,000‚Ç´',\n            payBtn: 'Pay Now',\n            loading: 'Processing payment...',\n            success: 'Payment Confirmed! Thank you.',\n            testBtn: 'Test Pay',\n            langEN: 'EN',\n            langVN: 'VN'\n        },\n        VN: {\n            brandTitle: 'TINH HOA VI·ªÜT',\n            tagline: 'N∆°i t√¥n vinh tinh hoa Vi·ªát Nam v∆∞∆°n t·∫ßm qu·ªëc t·∫ø',\n            features: ['S·ª± ki·ªán Gala ƒë·ªôc quy·ªÅn', 'Bi·ªÉu di·ªÖn vƒÉn h√≥a', 'K·∫øt n·ªëi c√πng c√°c tinh hoa'],\n            title: 'Thanh To√°n V√© S·ª± Ki·ªán',\n            subtitle: 'Ho√†n t·∫•t thanh to√°n ƒë·ªÉ x√°c nh·∫≠n tham d·ª±',\n            eventName: 'Gala Tinh Hoa Vi·ªát 2025',\n            date: '10/12/2025 ‚Äì 19:00',\n            location: 'Nh√† h√°t Th√†nh ph·ªë, TP. H·ªì Ch√≠ Minh',\n            price: 'Gi√° v√©: 500,000‚Ç´',\n            payBtn: 'Thanh to√°n ngay',\n            loading: 'ƒêang x·ª≠ l√Ω thanh to√°n...',\n            success: 'Thanh to√°n th√†nh c√¥ng! C·∫£m ∆°n b·∫°n.',\n            testBtn: 'Ki·ªÉm tra thanh to√°n (Portal)',\n            langEN: 'EN',\n            langVN: 'VN'\n        }\n    },\n    \"aid-cuisine\" : {\n        EN: {\n            brandTitle: 'TINH HOA VI·ªÜT',\n            tagline: 'Where Vietnamese Excellence Meets Global Recognition',\n            features: ['Exclusive Gala Event', 'Cultural Performances', 'Networking with Honorees'],\n\n            // üî• UPDATED\n            title: 'Event Ticket Payment',\n            subtitle: 'Complete your payment to confirm your attendance',\n            eventName: 'A.I Director Journey ‚Äì Vietnamese Culinary Heritage Promotion',\n            date: 'November 16, 2025 ‚Äì December 19, 2025',\n            location: 'Vietnam',\n            price: 'Ticket Price: 200,000‚Ç´',\n\n            payBtn: 'Pay Now',\n            loading: 'Processing payment...',\n            success: 'Payment Confirmed! Thank you.',\n            testBtn: 'Test Pay',\n            langEN: 'EN',\n            langVN: 'VN'\n        },\n\n        VN: {\n            brandTitle: 'TINH HOA VI·ªÜT',\n            tagline: 'N∆°i t√¥n vinh tinh hoa Vi·ªát Nam v∆∞∆°n t·∫ßm qu·ªëc t·∫ø',\n            features: ['S·ª± ki·ªán Gala ƒë·ªôc quy·ªÅn', 'Bi·ªÉu di·ªÖn vƒÉn h√≥a', 'K·∫øt n·ªëi c√πng c√°c tinh hoa'],\n\n            // üî• UPDATED\n            title: 'H√†nh tr√¨nh t√¨m ki·∫øm v√† vinh danh ƒê·∫°o di·ªÖn A.I',\n            subtitle: 'Ch·ªß ƒë·ªÅ cu·ªôc thi: Qu·∫£ng b√° N√©t ƒë·∫πp ·∫®m th·ª±c Vi·ªát Nam',\n            eventName: 'H√†nh tr√¨nh ƒê·∫°o di·ªÖn A.I ‚Äì Qu·∫£ng b√° ·∫®m th·ª±c Vi·ªát Nam',\n            date: '16/11/2025 ‚Äì 19/12/2025',\n            location: 'Vi·ªát Nam',\n            price: 'Gi√° v√©: 200,000‚Ç´',\n\n            payBtn: 'Thanh to√°n ngay',\n            loading: 'ƒêang x·ª≠ l√Ω thanh to√°n...',\n            success: 'Thanh to√°n th√†nh c√¥ng! C·∫£m ∆°n b·∫°n.',\n            testBtn: 'Ki·ªÉm tra thanh to√°n (Portal)',\n            langEN: 'EN',\n            langVN: 'VN'\n        }\n    }\n}"],"names":["i18n","events","LOG","args","console","log","EventPayment","user","setUser","useState","authLoading","setAuthLoading","language","setLanguage","loading","setLoading","isPaid","setIsPaid","qrData","setQrData","transactionId","setTransactionId","testLoading","setTestLoading","ticketType","setTicketType","t","hydrated","isLoggedInSafe","useEffect","cancelled","async","data","error","supabase","auth","getSession","session","_data$session","err","hydrate","listener","onAuthStateChange","_event","subscription","unsubscribe","channel","on","event","schema","table","payload","eventType","new","event_type","eventPayload","orderId","id","transactionid","subscribe","removeChannel","React","className","brandTitle","tagline","features","map","f","i","key","onClick","langEN","langVN","style","color","title","subtitle","textAlign","fontSize","marginBottom","eventName","date","location","fontWeight","marginTop","display","flexDirection","gap","padding","borderRadius","cursor","alignItems","border","type","checked","readOnly","marginLeft","FiCheckCircle","size","success","qrDataURL","qrCode","QRCodeCanvas","value","includeMargin","alert","payload2","bankAccount","content","amount","bankCode","transType","res","fetch","method","headers","body","JSON","stringify","text","disabled","backgroundColor","opacity","testBtn","email","user_id","user_email","ticket_type","ok","Error","json","qrLink","window","href","payBtn","FiArrowRight","CheckOut","EN","price","VN"],"sourceRoot":""}