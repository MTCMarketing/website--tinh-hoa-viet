{"version":3,"file":"component---src-pages-auth-confirm-tsx-0cf62169938a26d3d508.js","mappings":"wKAKe,SAASA,IACtB,MAAM,EAACC,EAAM,EAAEC,IAAaC,EAAAA,EAAAA,UAAS,iBAC/B,EAACC,EAAQ,EAAEC,IAAeF,EAAAA,EAAAA,UAAsB,MAuBhDG,EArBO,CACXC,GAAI,CACFC,WAAY,gBACZC,QAAS,uDACTC,UAAW,qBACXC,QAAS,gCACTC,YAAa,iBACbC,OAAQ,KACRC,OAAQ,MAEVC,GAAI,CACFP,WAAY,gBACZC,QAAS,kDACTC,UAAW,yBACXC,QAAS,6BACTC,YAAa,uBACbC,OAAQ,KACRC,OAAQ,OAIGV,GAyCf,OAvCAY,EAAAA,EAAAA,WAAU,KACaC,WACnB,IACE,MAAMC,EAAM,IAAIC,IAAIC,OAAOC,SAASC,MAC9BC,EAAaL,EAAIM,aAAaC,IAAI,cAClCC,EAAYR,EAAIM,aAAaC,IAAI,SAAW,QAElD,IAAKF,EAEH,YADArB,EAAU,uBAIZ,MAAM,KAAEyB,EAAI,MAAEC,SAAgBC,EAAAA,GAASC,KAAKC,UAAU,CACpDR,aACAG,SAGEE,EACF1B,EAAU,wBAA0B0B,EAAMI,UAE1C9B,EAAUI,EAAEK,SAEZsB,WAAW,KACT/B,EAAUI,EAAEM,cACX,MAGHqB,WAAW,MACTC,EAAAA,EAAAA,UAAS,wBACR,MAEP,CAAE,MAAOC,GACPjC,EAAU,oCACZ,GAGFkC,IACC,CAAChC,IAGFiC,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,cAEbD,EAAAA,cAAAA,QAAAA,CAAOC,UAAU,aAAa,kBAC5BD,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,gBACfD,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,kBACfD,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,cACbD,EAAAA,cAAAA,KAAAA,CAAIC,UAAU,cAAchC,EAAEE,YAC9B6B,EAAAA,cAAAA,IAAAA,CAAGC,UAAU,aAAahC,EAAEG,WAKhC4B,EAAAA,cAAAA,OAAAA,CAAMC,UAAU,aAEdD,EAAAA,cAAAA,SAAAA,CAAQC,UAAU,YAChBD,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,eACbD,EAAAA,cAAAA,SAAAA,CACEC,UAAS,SAAuB,OAAblC,EAAoB,SAAW,IAClDmC,QAASA,IAAMlC,EAAY,OAE1BC,EAAEO,QAELwB,EAAAA,cAAAA,OAAAA,CAAMC,UAAU,OAAM,KACtBD,EAAAA,cAAAA,SAAAA,CACEC,UAAS,SAAuB,OAAblC,EAAoB,SAAW,IAClDmC,QAASA,IAAMlC,EAAY,OAE1BC,EAAEQ,UAMTuB,EAAAA,cAAAA,UAAAA,CAASC,UAAU,YAAYE,MAAO,CAAEC,UAAW,WACjDJ,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,SACbD,EAAAA,cAAAA,KAAAA,CAAIC,UAAU,SACE,OAAblC,EAAoB,qBAAuB,kBAE9CiC,EAAAA,cAAAA,IAAAA,CAAGC,UAAU,YACVrC,IAKLoC,EAAAA,cAAAA,MAAAA,CACEG,MAAO,CACLE,UAAW,GACXC,QAAS,OACTC,eAAgB,WAGlBP,EAAAA,cAAAA,MAAAA,CAAKC,UAAU,cAM3B,C","sources":["webpack:///./src/pages/auth/confirm.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { navigate } from \"gatsby\";\nimport \"../../componets/log-in/login.css\";\nimport { supabase } from \"../../database/supabaseClient\";\n\nexport default function ConfirmEmail() {\n  const [status, setStatus] = useState(\"Verifying...\");\n  const [language, setLanguage] = useState<\"EN\" | \"VN\">(\"EN\");\n\n  const i18n = {\n    EN: {\n      brandTitle: \"TINH HOA VIỆT\",\n      tagline: \"Where Vietnamese Excellence Meets Global Recognition\",\n      verifying: \"Verifying email...\",\n      success: \"Email confirmed successfully!\",\n      redirecting: \"Redirecting...\",\n      langEN: \"EN\",\n      langVN: \"VN\",\n    },\n    VN: {\n      brandTitle: \"TINH HOA VIỆT\",\n      tagline: \"Nơi tôn vinh tinh hoa Việt Nam vươn tầm quốc tế\",\n      verifying: \"Đang xác minh email...\",\n      success: \"Xác minh email thành công!\",\n      redirecting: \"Đang chuyển hướng...\",\n      langEN: \"EN\",\n      langVN: \"VN\",\n    },\n  };\n\n  const t = i18n[language];\n\n  useEffect(() => {\n    const confirmEmail = async () => {\n      try {\n        const url = new URL(window.location.href);\n        const token_hash = url.searchParams.get(\"token_hash\");\n        const type: any = url.searchParams.get(\"type\") || \"email\";\n\n        if (!token_hash) {\n          setStatus(\"Missing token hash.\");\n          return;\n        }\n\n        const { data, error } = await supabase.auth.verifyOtp({\n          token_hash,\n          type,\n        });\n\n        if (error) {\n          setStatus(\"Verification failed: \" + error.message);\n        } else {\n          setStatus(t.success);\n\n          setTimeout(() => {\n            setStatus(t.redirecting);\n          }, 1200);\n\n          // Final redirect\n          setTimeout(() => {\n            navigate(\"/event/aid/checkout\");\n          }, 2500);\n        }\n      } catch (err) {\n        setStatus(\"Unexpected error verifying token.\");\n      }\n    };\n\n    confirmEmail();\n  }, [language]);\n\n  return (\n    <div className=\"auth-shell\">\n      {/* LEFT BRAND SIDE */}\n      <aside className=\"brand-side\" aria-hidden>\n        <div className=\"brand-sheen\" />\n        <div className=\"brand-pattern\" />\n        <div className=\"brand-wrap\">\n          <h1 className=\"brand-name\">{t.brandTitle}</h1>\n          <p className=\"brand-tag\">{t.tagline}</p>\n        </div>\n      </aside>\n\n      {/* RIGHT SECTION */}\n      <main className=\"form-side\">\n        {/* Language Selector */}\n        <header className=\"form-top\">\n          <div className=\"lang-switch\">\n            <button\n              className={`lang ${language === \"EN\" ? \"active\" : \"\"}`}\n              onClick={() => setLanguage(\"EN\")}\n            >\n              {t.langEN}\n            </button>\n            <span className=\"mid\">|</span>\n            <button\n              className={`lang ${language === \"VN\" ? \"active\" : \"\"}`}\n              onClick={() => setLanguage(\"VN\")}\n            >\n              {t.langVN}\n            </button>\n          </div>\n        </header>\n\n        {/* CENTER CONTENT */}\n        <section className=\"form-wrap\" style={{ textAlign: \"center\" }}>\n          <div className=\"intro\">\n            <h2 className=\"title\">\n              {language === \"EN\" ? \"Email Verification\" : \"Xác Minh Email\"}\n            </h2>\n            <p className=\"subtitle\">\n              {status}\n            </p>\n          </div>\n\n          {/* SPINNER */}\n          <div\n            style={{\n              marginTop: 30,\n              display: \"flex\",\n              justifyContent: \"center\",\n            }}\n          >\n            <div className=\"loader\"></div>\n          </div>\n        </section>\n      </main>\n    </div>\n  );\n}\n"],"names":["ConfirmEmail","status","setStatus","useState","language","setLanguage","t","EN","brandTitle","tagline","verifying","success","redirecting","langEN","langVN","VN","useEffect","async","url","URL","window","location","href","token_hash","searchParams","get","type","data","error","supabase","auth","verifyOtp","message","setTimeout","navigate","err","confirmEmail","React","className","onClick","style","textAlign","marginTop","display","justifyContent"],"sourceRoot":""}